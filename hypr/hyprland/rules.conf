# ######## Window rules ########

# Uncomment to apply global transparency to all windows:
# windowrulev2 = opacity 0.89 override 0.89 override, class:.*

# Disable blur for xwayland context menus
windowrulev2 = noblur,class:^()$,title:^()$ # Disable blur for empty XWayland windows
# windowrulev2 = noblur, xwayland:1


# Floating
windowrulev2 = center, title:^(Open File)(.*)$ # Center "Open File" dialogs
windowrulev2 = float, title:^(Open File)(.*)$ # Float "Open File" dialogs
windowrulev2 = center, title:^(Select a File)(.*)$ # Center "Select a File" dialogs
windowrulev2 = float, title:^(Select a File)(.*)$ # Float "Select a File" dialogs
windowrulev2 = center, title:^(Choose wallpaper)(.*)$ # Center "Choose wallpaper" dialogs
windowrulev2 = float, title:^(Choose wallpaper)(.*)$ # Float "Choose wallpaper" dialogs
windowrulev2 = size 60% 65%, title:^(Choose wallpaper)(.*)$ # Resize "Choose wallpaper" dialogs
windowrulev2 = center, title:^(Open Folder)(.*)$ # Center "Open Folder" dialogs
windowrulev2 = float, title:^(Open Folder)(.*)$ # Float "Open Folder" dialogs
windowrulev2 = center, title:^(Save As)(.*)$ # Center "Save As" dialogs
windowrulev2 = float, title:^(Save As)(.*)$ # Float "Save As" dialogs
windowrulev2 = center, title:^(Library)(.*)$ # Center "Library" dialogs
windowrulev2 = float, title:^(Library)(.*)$ # Float "Library" dialogs
windowrulev2 = center, title:^(File Upload)(.*)$ # Center "File Upload" dialogs
windowrulev2 = float, title:^(File Upload)(.*)$ # Float "File Upload" dialogs
windowrulev2 = center, title:^(.*)(wants to save)$ # Center save dialogs
windowrulev2 = float, title:^(.*)(wants to save)$ # Float save dialogs
windowrulev2 = center, title:^(.*)(wants to open)$ # Center open dialogs
windowrulev2 = float, title:^(.*)(wants to open)$ # Float open dialogs
windowrulev2 = float, class:^(blueberry\.py)$ # Float Blueberry
windowrulev2 = float, class:^(guifetch)$ # Float Guifetch
windowrulev2 = float, class:^(pavucontrol)$ # Float Pavucontrol
windowrulev2 = size 45%, class:^(pavucontrol)$ # Resize Pavucontrol
windowrulev2 = center, class:^(pavucontrol)$ # Center Pavucontrol
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$ # Float Pavucontrol (PulseAudio)
windowrulev2 = size 45%, class:^(org.pulseaudio.pavucontrol)$ # Resize Pavucontrol (PulseAudio)
windowrulev2 = center, class:^(org.pulseaudio.pavucontrol)$ # Center Pavucontrol (PulseAudio)
windowrulev2 = float, class:^(nm-connection-editor)$ # Float Network Manager Connection Editor
windowrulev2 = size 45%, class:^(nm-connection-editor)$ # Resize Network Manager Connection Editor
windowrulev2 = center, class:^(nm-connection-editor)$ # Center Network Manager Connection Editor
windowrulev2 = float, class:.*plasmawindowed.* # Float Plasma Windowed Apps
windowrulev2 = float, class:kcm_.* # Float KDE Control Modules
windowrulev2 = float, class:.*bluedevilwizard # Float Bluedevil Wizard
windowrulev2 = float, title:.*Welcome # Float Welcome Windows
windowrulev2 = float, title:^(illogical-impulse Settings)$ # Float illogical-impulse Settings
windowrulev2 = float, title:.*Shell conflicts.* # Float Shell Conflicts Dialog
windowrulev2 = float, class:org.freedesktop.impl.portal.desktop.kde # Float KDE Portal
windowrulev2 = size 60% 65%, class:org.freedesktop.impl.portal.desktop.kde # Resize KDE Portal
windowrulev2 = float, class:^(Zotero)$ # Float Zotero
windowrulev2 = size 45%, class:^(Zotero)$ # Resize Zotero

# Move
# kde-material-you-colors spawns a window when changing dark/light theme. This is to make sure it doesn't interfere at all.
windowrulev2 = float, class:^(plasma-changeicons)$ # Float Plasma Icon Changer
windowrulev2 = noinitialfocus, class:^(plasma-changeicons)$ # No initial focus for Plasma Icon Changer
windowrulev2 = move 999999 999999, class:^(plasma-changeicons)$ # Move Plasma Icon Changer off-screen
# stupid dolphin copy
windowrulev2 = move 40 80, title:^(Copying — Dolphin)$ # Position Dolphin copy dialog

# Tiling
windowrulev2 = tile, class:^dev\.warp\.Warp$ # Tile Warp Terminal

# Picture-in-Picture
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ # Float Picture-in-Picture
windowrulev2 = keepaspectratio, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ # Keep aspect ratio for PiP
windowrulev2 = move 73% 72%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ # Position Picture-in-Picture
windowrulev2 = size 25%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ # Resize Picture-in-Picture
windowrulev2 = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ # Pin Picture-in-Picture

# --- Tearing ---
windowrulev2 = immediate, title:.*\.exe # Immediate rendering for .exe files
windowrulev2 = immediate, title:.*minecraft.* # Immediate rendering for Minecraft
windowrulev2 = immediate, class:^(steam_app).* # Immediate rendering for Steam games

# No shadow for tiled windows (matches windows that are not floating).
windowrulev2 = noshadow, floating:0 # No shadow for tiled windows

# ######## Workspace rules ########
workspace = special:special, gapsout:30 # Special workspace with gaps

# ######## Layer rules ########
layerrule = xray 1, .* # X-ray mode for all layers
# layerrule = noanim, .*
layerrule = noanim, walker # No animation for walker
layerrule = noanim, selection # No animation for selection
layerrule = noanim, overview # No animation for overview
layerrule = noanim, anyrun # No animation for anyrun
layerrule = noanim, indicator.* # No animation for indicators
layerrule = noanim, osk # No animation for on-screen keyboard
layerrule = noanim, hyprpicker # No animation for hyprpicker

layerrule = noanim, noanim # No animation for "noanim" layer
layerrule = blur, gtk-layer-shell # Blur for gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell # Ignore zero for gtk-layer-shell
layerrule = blur, launcher # Blur for launcher
layerrule = ignorealpha 0.5, launcher # Ignore alpha for launcher
layerrule = blur, notifications # Blur for notifications
layerrule = ignorealpha 0.69, notifications # Ignore alpha for notifications
layerrule = blur, logout_dialog # Blur for logout dialog

# ags
layerrule = animation slide left, sideleft.* # Slide left animation for sideleft
layerrule = animation slide right, sideright.* # Slide right animation for sideright
layerrule = blur, session[0-9]* # Blur for sessions
layerrule = blur, bar[0-9]* # Blur for bars
layerrule = ignorealpha 0.6, bar[0-9]* # Ignore alpha for bars
layerrule = blur, barcorner.* # Blur for bar corners
layerrule = ignorealpha 0.6, barcorner.* # Ignore alpha for bar corners
layerrule = blur, dock[0-9]* # Blur for docks
layerrule = ignorealpha 0.6, dock[0-9]* # Ignore alpha for docks
layerrule = blur, indicator.* # Blur for indicators
layerrule = ignorealpha 0.6, indicator.* # Ignore alpha for indicators
layerrule = blur, overview[0-9]* # Blur for overviews
layerrule = ignorealpha 0.6, overview[0-9]* # Ignore alpha for overviews
layerrule = blur, cheatsheet[0-9]* # Blur for cheatsheets
layerrule = ignorealpha 0.6, cheatsheet[0-9]* # Ignore alpha for cheatsheets
layerrule = blur, sideright[0-9]* # Blur for sideright
layerrule = ignorealpha 0.6, sideright[0-9]* # Ignore alpha for sideright
layerrule = blur, sideleft[0-9]* # Blur for sideleft
layerrule = ignorealpha 0.6, sideleft[0-9]* # Ignore alpha for sideleft
layerrule = blur, osk[0-9]* # Blur for on-screen keyboards
layerrule = ignorealpha 0.6, osk[0-9]* # Ignore alpha for on-screen keyboards

# Quickshell
layerrule = blurpopups, quickshell:.* # Blur popups for Quickshell
layerrule = blur, quickshell:.* # Blur for Quickshell
layerrule = ignorealpha 0.79, quickshell:.* # Ignore alpha for Quickshell
layerrule = animation slide, quickshell:bar # Slide animation for Quickshell bar
layerrule = animation slide, quickshell:verticalBar # Slide animation for Quickshell vertical bar
layerrule = animation fade, quickshell:screenCorners # Fade animation for Quickshell screen corners
layerrule = animation slide right, quickshell:sidebarRight # Slide right animation for Quickshell right sidebar
layerrule = animation slide left, quickshell:sidebarLeft # Slide left animation for Quickshell left sidebar
layerrule = animation slide top, quickshell:wallpaperSelector # Slide top animation for Quickshell wallpaper selector
layerrule = animation slide bottom, quickshell:osk # Slide bottom animation for Quickshell OSK
layerrule = animation slide bottom, quickshell:dock # Slide bottom animation for Quickshell dock
layerrule = animation slide bottom, quickshell:cheatsheet # Slide bottom animation for Quickshell cheatsheet
layerrule = blur, quickshell:session # Blur for Quickshell session
layerrule = noanim, quickshell:session # No animation for Quickshell session
layerrule = ignorealpha 0, quickshell:session # Ignore alpha for Quickshell session
layerrule = animation fade, quickshell:notificationPopup # Fade animation for Quickshell notification popup
layerrule = blur, quickshell:backgroundWidgets # Blur for Quickshell background widgets
layerrule = ignorealpha 0.05, quickshell:backgroundWidgets # Ignore alpha for Quickshell background widgets
layerrule = noanim, quickshell:screenshot # No animation for Quickshell screenshot
layerrule = animation popin 120%, quickshell:screenCorners # Pop-in animation for Quickshell screen corners
layerrule = noanim, quickshell:lockWindowPusher # No animation for Quickshell lock window pusher


# Launchers need to be FAST
layerrule = noanim, quickshell:overview # No animation for Quickshell overview
layerrule = noanim, gtk4-layer-shell # No animation for gtk4-layer-shell
## outfoxxed's stuff
layerrule = blur, shell:bar # Blur for shell bar
layerrule = ignorezero, shell:bar # Ignore zero for shell bar
layerrule = blur, shell:notifications # Blur for shell notifications
layerrule = ignorealpha 0.1, shell:notifications # Ignore alpha for shell notifications

# Предотвратить автоматический фокус на окнах, требующих внимания
windowrulev2 = suppressevent focus, class:.*, urgent:1 # Suppress focus for urgent windows

# Правила для игр Steam
windowrulev2 = float, class:^(steam_app_.*)$ # Float Steam games
windowrulev2 = fullscreen, class:^(steam_app_.*)$ # Fullscreen Steam games

# Правило для самого оверлея Steam, чтобы он отображался корректно
windowrulev2 = float, title:^(Steam Overlay)$ # Float Steam Overlay
