"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1408,8865],{80918:(e,r,t)=>{t.d(r,{X:()=>b});var n=t(30758),a=t(62411),s=t(49263),i=t(93492),o=t(12032),l=t(56695),c=t(71338),u=t(56116),d=t(48975),m=t(24395),p=t(21053),x=t(49593),h=t(68055),f=t(80687),g=t(86070);const v=({currentUserUri:e,uri:r,name:t,divider:m,onBlock:v})=>{const b=(0,u.W)(),j=!(0,d.n)(),{isBlocked:k,blockUser:y,unblockUser:C}=function(e,r,t,s){const[l,u]=(0,n.useState)(!1),d=(0,a.wA)(),m=(0,p.a)(),g=(0,f.A)(),{enqueueSnackbar:v}=(0,c.d)();return(0,n.useEffect)((()=>{e&&(0,h.zP)(g,{currentUserUri:e,uri:r}).then((e=>{if(m()){if(200!==e.status)throw new Error("Invalid response from socialgraph");u(e.body?.[0]?.is_dismissed||!1)}}))}),[e,r,m,g]),{isBlocked:l,blockUser:()=>{e&&d((0,o.zj)(r,t,s))},unblockUser:async()=>{e&&(await(0,h.kV)(x.n.getInstance(),{currentUserUri:e,uri:r}),v(i.Ru.get("feedback.unblock-user")))}}}(e,r,t,v),R=(0,n.useCallback)((async()=>{b({targetUri:r,intent:k?"unblock":"block",type:"click"}),k?await C():await y()}),[b,r,y,C,k]);if(!e||e===r)return null;const w=k?i.Ru.get("contextmenu.unblock"):i.Ru.get("contextmenu.block");return(0,g.jsx)(l.D,{role:"menuitem",divider:m,disabled:j,onClick:R,leadingIcon:(0,g.jsx)(s.r,{semanticColor:"textSubdued",size:"small"}),children:w})},b=n.memo((function(e){return(0,g.jsx)(m.pZ,{value:"block-user",children:(0,g.jsx)(v,{...e})})}))},50532:(e,r,t)=>{t.d(r,{p:()=>d});var n=t(30758),a=t(62411),s=t(30320),i=t(12032),o=t(56695),l=t(48975),c=t(36663),u=t(86070);const d=n.memo((function({uri:e,divider:r,removeLabel:t}){const d=(0,a.wA)(),m=!(0,l.n)(),p=(0,c.f)(),x=(0,n.useCallback)((async()=>{d((0,i.aw)(e,!0))}),[d,e]);return(0,u.jsx)(o.D,{role:"menuitem",divider:r,disabled:m&&!p?.getCapabilities().canModifyOffline,onClick:x,leadingIcon:(0,u.jsx)(s.k,{semanticColor:"textBrightAccent",size:"small"}),children:t})}))},2103:(e,r,t)=>{t.d(r,{P:()=>f});var n=t(30758),a=t(93492),s=t(55669),i=t(42026),o=t(31966),l=t(2082),c=t(61890),u=t(50532),d=t(24395),m=t(68508),p=t(69611),x=t(78172),h=t(86070);const f=n.memo((function({uri:e,artistUri:r,canPin:t=m.oT.NO,isPinned:n=!1,canRemove:f=!1}){const{spec:g}=(0,p.o)(e);return(0,h.jsx)(d.pZ,{value:"album",children:(0,h.jsxs)(s.W,{children:[f&&(0,h.jsx)(u.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),r&&(0,h.jsx)(o.z,{spec:g,divider:"after",uri:r,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),t!==m.oT.NO&&(0,h.jsx)(c.k,{uri:e,canPin:t,isPinned:n,type:x.c.PRE_RELEASE_ALBUM,spec:g}),(0,h.jsx)(i.m,{uri:e,spec:g,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,h.jsx)(l.q,{spec:g,divider:"before",uri:e})]})})}))},34855:(e,r,t)=>{t.d(r,{B:()=>L});var n=t(30758),a=t(62411),s=t(93492),i=t(55669),o=t(80918),l=t(42026),c=t(33650),u=t(56695),d=t(24395),m=t(86070);const p=n.memo((function({onClick:e,divider:r,canEdit:t}){return e&&t?(0,m.jsx)(d.pZ,{value:"edit-profile",children:(0,m.jsx)(u.D,{role:"menuitem",divider:r,onClick:e,leadingIcon:(0,m.jsx)(c.G,{semanticColor:"textSubdued",size:"small"}),children:s.Ru.get("contextmenu.edit-profile")})}):null}));var x=t(27508),h=t(96869),f=t(8950),g=t(56116),v=t(48975),b=t(306),j=t(98962),k=t(82362);const y=()=>{},C=({uri:e,divider:r,onRemoveCallback:t=y})=>{const{spec:i,logger:o}=(0,k.r)(f.F,{data:{uri:e}}),l=(0,g.W)(),c=!(0,v.n)(),d=(0,a.d4)(j.Ht).user,[p,C]=(0,b.Y)(e),R=(0,n.useCallback)((()=>{const r=i.followButtonFactory();l({targetUri:e,intent:p?"unfollow":"follow",type:"click"}),p?(C(!1),o.logInteraction(r.hitUnfollow({itemToBeUnfollowed:e})),t(e)):(C(!0),o.logInteraction(r.hitFollow({itemToBeFollowed:e})))}),[p,o,l,t,C,i,e]);if(d&&d.uri===e)return null;const w=p?s.Ru.get("contextmenu.unfollow"):s.Ru.get("contextmenu.follow");return(0,m.jsx)(u.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:r,disabled:c,onClick:R,leadingIcon:p?(0,m.jsx)(x.M,{semanticColor:"textBrightAccent",size:"small"}):(0,m.jsx)(h.h,{semanticColor:"textSubdued",size:"small"}),children:w})},R=n.memo((function(e){return(0,m.jsx)(d.pZ,{value:"follow-user",children:(0,m.jsx)(C,{...e})})}));var w=t(97395),S=t(5879),P=t(12032),E=t(90843),A=t(94822),I=t(75788),T=t(33887);function U({userUri:e}){const{currentSession:r}=(0,A.D)(),t=(0,I.d)(),i=(0,a.wA)(),o=(0,n.useCallback)((()=>{const t=(0,T.Bj)(r?.sessionMembers??[],e);t&&i((0,P.A9)(E.EL.REMOVE_PARTICIPANT,void 0,t))}),[r?.sessionMembers,i,e]),l=(0,T.kt)(t,e);return r?.active&&e&&l?(0,m.jsx)(u.D,{role:"menuitem",onClick:o,leadingIcon:(0,m.jsx)(S.f,{semanticColor:"textSubdued",size:"small"}),children:s.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,m.jsx)(m.Fragment,{})}var _=t(68055),N=t(43080),D=t(69611);const L=n.memo((function({uri:e,onEditProfileCallback:r}){const{user:t}=(0,a.d4)(j.Ht),{spec:n}=(0,D.o)(e),{data:c,loading:u}=(0,N.Z)(_.E$,[{uri:e}]);return u?null:c?(0,m.jsx)(d.pZ,{value:"user",children:(0,m.jsxs)(i.W,{children:[(0,m.jsx)(R,{uri:e}),(0,m.jsx)(U,{userUri:e}),(0,m.jsx)(o.X,{uri:c.uri,name:c.name,currentUserUri:t?.uri}),(0,m.jsx)(p,{onClick:r,canEdit:!(e!==t?.uri||c.edit_image_disabled&&c.edit_name_disabled)}),(0,m.jsx)(w.P,{spec:n,uri:e,canReportUser:!c.report_abuse_disabled,currentUserUri:t?.uri}),(0,m.jsx)(l.m,{spec:n,uri:e,displayText:s.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},18340:(e,r,t)=>{t.d(r,{G:()=>w});var n=t(97500),a=t.n(n),s=t(93492),i=t(13505);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",u="gqidZhN1lgoZDfI_7E6w",d="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var p=t(86070);const x=({value:e,label:r,hasDivider:t=!1})=>(0,p.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,p.jsx)(i.E,{variant:"titleSmall",className:a()({[d]:t}),children:e}),(0,p.jsx)(i.E,{variant:"marginal",semanticColor:"textSubdued",children:r})]});var h=t(30758);const f=6e4,g=36e5,v=864e5;var b=t(40841),j=t(48455);const k={days:0,hours:0,minutes:0,seconds:0};function y(e){return e>0?function(e){const r=Math.abs(e);return{days:Math.floor(r/v),hours:Math.floor(r%v/g),minutes:Math.floor(r%g/f),seconds:Math.floor(r%f/1e3)}}(e):k}var C=t(55117),R=t(78172);const w=({targetDate:e,className:r,onComplete:t,images:n,imageTitle:i})=>{const{days:c,hours:d,minutes:f,seconds:g}=((e,r)=>{const t=(0,h.useRef)(r);t.current=r;const[n,a]=(0,h.useState)((()=>y((0,b.u)(e))));return(0,j.$)((r=>{const n=(0,b.u)(e),s=y(n);a(s),n<=0&&(r(),t.current?.())}),1e3),n})(e,t),v=void 0!==n&&n.length>0&&i,k=s.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:d,minutes:f,seconds:g});return(0,p.jsxs)("div",{className:a()(o,r,{[l]:v}),role:"timer","data-testid":"countdown",children:[(0,p.jsx)("span",{className:m,children:k}),v&&(0,p.jsx)(C.b,{images:n,type:R.c.ALBUM,shape:C.u.ROUNDED_CORNERS,className:u,title:i}),(0,p.jsx)(x,{value:c,label:s.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,p.jsx)(x,{value:d,label:s.Ru.get("web-player.prerelease.hours",d),hasDivider:!0}),(0,p.jsx)(x,{value:f,label:s.Ru.get("web-player.prerelease.minutes",f),hasDivider:!0}),(0,p.jsx)(x,{value:g,label:s.Ru.get("web-player.prerelease.seconds",g)})]})}},15810:(e,r,t)=>{t.d(r,{j:()=>E});var n=t(30758),a=t(97500),s=t.n(a),i=t(13505),o=t(24587),l=t(72574),c=t(93492),u=t(19837),d=t(12367),m=t(96691),p=t(34855),x=t(5119);var h=t(89232),f=t(20951),g=t(33059),v=t(88520),b=t(86070);function j(e){return e.displayName||e.name||""}const k=e=>{let r=null;return(0,l.ecE)(e)&&(r=(0,b.jsx)(m.t,{uri:e})),(0,l.APS)(e)&&(r=(0,b.jsx)(p.B,{uri:e})),r},y=({creator:e,onClick:r,position:t=0})=>{const a=(0,n.useCallback)((n=>{r?.(n,{position:t,creator:e})}),[e,r,t]);return(0,h.s)(e)?(0,b.jsx)(d.h,{menu:k(e.uri),children:(0,b.jsx)(i.E,{variant:"bodySmallBold",children:(0,b.jsx)(x.N,{"data-testid":"creator-link",to:e.uri,onClick:a,children:j(e)})})}):(0,b.jsx)(i.E,{variant:"bodySmall",children:j(e)})},C=({creator:e,onClick:r,isSmallIcon:t})=>{const[n,a]=c.Ru.get("playlist.header.made-for","USER").split("USER");return(0,b.jsxs)("div",{className:s()(v.A.metaDataText,v.A.creatorWrapper,{[v.A.smallMadeForIcon]:t}),children:[(0,b.jsx)(o.D,{semanticColor:"textBrightAccent"}),(0,b.jsx)(i.E,{variant:"bodySmall",children:n}),(0,b.jsx)(y,{creator:e,onClick:r}),a&&(0,b.jsx)(i.E,{variant:"bodySmall",children:a})]})},R=({creator:e,onClick:r,isSmallIcon:t,prefix:n})=>(0,b.jsxs)("div",{className:s()(v.A.metaDataText,v.A.creatorWrapper),children:[e.images.length>0&&(0,b.jsx)(u.e,{label:j(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:t?20:24,userIconSize:t?"xsmall":"small"}),n&&(0,b.jsx)(i.E,{variant:"bodySmall",children:n}),(0,b.jsx)(y,{creator:e,onClick:r})]}),w=({creators:e,onPiledCreatorsClick:r,isSmallIcon:t})=>{const n=(0,b.jsx)("div",{className:v.A.piled,children:e.slice(0,3).map(((e,r)=>(0,b.jsx)(u.e,{label:j(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:t?20:24,userIconSize:t?"xsmall":"small",piled:r>0},e.uri)))});let a=c.Ru.get("playlist.header.creator-and-others",j(e[0]),e.length-1);return 2===e.length&&(a=c.Ru.get("playlist.header.creator-and-co-creator",j(e[0]),j(e[1]))),r?(0,b.jsxs)("button",{className:s()(v.A.metaDataText,v.A.creatorWrapper,v.A.creatorButton),onClick:r,children:[n,a]}):(0,b.jsxs)("div",{className:s()(v.A.metaDataText,v.A.creatorWrapper),children:[n,a]})},S=({creators:e,onCreatorClick:r})=>(0,b.jsx)(b.Fragment,{children:e.map(((e,t)=>(0,b.jsxs)(n.Fragment,{children:[0!==t&&(0,b.jsx)("span",{className:v.A.divider}),(0,b.jsx)(y,{creator:e,onClick:r,position:t})]},e.id)))}),P=({creators:e,onPiledCreatorsClick:r,onCreatorClick:t,isTunaApplied:n})=>{const a=(0,g.y)(),s=a===(f.E.SMALL||a===f.E.XSMALL);if(1===e.length){const[r]=e;return r.isMadeFor?(0,b.jsx)(C,{creator:r,onClick:t,isSmallIcon:s}):(0,b.jsx)(R,{creator:r,onClick:t,isSmallIcon:s,prefix:n?"":void 0})}return e.length>0&&e.every((e=>(0,l.APS)(e.uri)))?(0,b.jsx)(w,{creators:e,onPiledCreatorsClick:r,isSmallIcon:s}):(0,b.jsx)(S,{creators:e,onCreatorClick:t})};function E({creators:e,onCreatorClick:r,onPiledCreatorsClick:t,isTunaApplied:a}){return(0,b.jsx)(n.Suspense,{fallback:null,children:(0,b.jsx)(P,{creators:e,onPiledCreatorsClick:t,onCreatorClick:r,isTunaApplied:a})})}},37299:(e,r,t)=>{t.d(r,{B:()=>i});var n=t(13505),a=t(88520),s=t(86070);const i=({children:e})=>(0,s.jsx)(n.E,{variant:"bodySmall",className:a.A.pretitle,children:e})},95321:(e,r,t)=>{t.d(r,{h:()=>d});var n=t(30758),a=t(81899),s=t(41179),i=t(60841),o=t(13753),l=t(18308);var c=t(9875),u=t(86070);const d=({children:e,action:r,uri:t})=>{const d=(0,i.V)(),m=(0,l.N)(o.JD);let p;const x=()=>{const e={triggerId:s.d,triggerAction:{type:r}};a.h.set((r=>({...r,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[t]})};try{p=n.Children.only(e)}catch(r){return(0,u.jsx)(u.Fragment,{children:e})}return d?n.cloneElement(p,{onClick:x}):(0,u.jsx)(u.Fragment,{children:e})}},99557:(e,r,t)=>{t.d(r,{v:()=>m});var n=t(21974),a=t(30320),s=t(555),i=t(70257),o=t(93492),l=t(95321),c=t(28552),u=t(3910),d=t(86070);const m=({uri:e,isBook:r=!1})=>{const{isPreSaved:t,addPresave:m,removePresave:p}=(0,c.w)({uri:e,isBook:r});return t?(0,d.jsx)(n.n,{onClick:p,iconTrailing:a.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,d.jsx)(l.h,{uri:e,action:u.no.SAVE_PRERELEASE,children:(0,d.jsx)(s.$,{disabled:void 0===t,onClick:m,iconTrailing:i.P,children:o.Ru.get("web-player.prerelease.presave")})})}},58157:(e,r,t)=>{t.r(r),t.d(r,{AlbumPrerelease:()=>je});var n=t(97500),a=t.n(n),s=t(85387),i=t(13505),o=t(72574),l=t(93492),c=t(40841),u=t(64359),d=t(8030),m=t(30758),p=t(75690),x=t(42297),h=t(85277),f=t(80352),g=t(585),v=t(2103),b=t(99557),j=t(555),k=t(39363),y=t(82362),C=t(86070);const R=({uri:e})=>{const r=(0,k.V)(e),{spec:t,logger:n}=(0,y.r)(p.k,{data:{uri:e||""}}),a=(0,m.useCallback)((()=>{e&&(n.logInteraction(t.actionBarFactory().preSaveButtonFactory().hitUiNavigate({destination:e})),r())}),[r,t,e,n]);return e?(0,C.jsx)(j.$,{onClick:a,children:l.Ru.get("web-player.prerelease.listen_now")}):null};var w=t(96437);const S=({prerelease:e,backgroundColor:r})=>{const t=function(e){const[r,t]=(0,m.useState)((()=>!!e&&(0,c.u)(e)<=0));return(0,m.useEffect)((()=>{if(!e)return;const r=(0,c.u)(e);if(r<=0)return void t(!0);if(r>=36e5)return void t(!1);const n=setTimeout((()=>{t(!0)}),r);return()=>{clearTimeout(n)}}),[e]),r}(e.releaseDate?.isoString),{spec:n,UBIFragment:a}=(0,y.r)(p.k,{data:{uri:e.uri}}),s=(0,w.j)();return(0,C.jsx)(x.E,{backgroundColor:r,children:(0,C.jsxs)(h.S,{children:[t?(0,C.jsx)(R,{uri:e.content?.uri}):(0,C.jsx)(b.v,{uri:e.uri}),(0,C.jsx)(a,{spec:n,children:(0,C.jsx)(g.b,{menu:(0,C.jsx)(v.P,{uri:e.uri,artistUri:e.content?.artists[0].uri}),children:(0,C.jsx)(f.e,{label:l.Ru.get("more.label.context",e.content?.name),size:s})})})]})})};var P=t(12367),E=t(18340),A=t(94201),I=t(3996),T=t(4378),U=t(11951),_=t(49022),N=t(44746),D=t(15810),L=t(39856),B=t(5389),M=t(37299),F=t(26101),z=t(20951),O=t(33059),Z=t(2036);const W="LFDgGRo4wD273tY6cKQ0",$=({prerelease:e,children:r})=>(0,C.jsx)(P.h,{menu:(0,C.jsx)(v.P,{uri:e.uri,artistUri:e.content?.artists[0].uri}),children:r}),X=({prerelease:e,backgroundColor:r})=>{const{content:t,releaseDate:n}=e,a=(0,O.y)(),s=a===z.E.SMALL||a===z.E.XSMALL,{spec:i,logger:o}=(0,y.r)(p.k,{data:{uri:e.uri}}),l=(0,m.useCallback)(((e,r)=>{if(i){const e=i.headerFactory().artistNameFactory().hitUiNavigate({destination:r.creator.uri});o.logInteraction(e)}}),[o,i]),c=t,u=(0,m.useMemo)((()=>n?.isoString?new Date(n.isoString):void 0),[n]);return(0,C.jsxs)(A.z,{backgroundColor:r,size:A.K.LARGE,children:[(0,C.jsx)(U.h,{children:c.name?(0,C.jsx)($,{prerelease:e,children:(0,C.jsx)(_.X,{text:c.name})}):null}),!s&&(0,C.jsx)($,{prerelease:e,children:(0,C.jsx)(I.K,{images:c.coverArt.sources,name:c.name??"",placeholderType:"album"})}),(0,C.jsxs)(T.Y,{children:[(0,C.jsx)(M.B,{children:(0,Z.C)(c.type)}),(0,C.jsx)($,{prerelease:e,children:(0,C.jsx)(F.mm,{scaleAtMinWidth:F.Cl,children:c.name})}),(0,C.jsxs)(N.X,{children:[(0,C.jsx)(D.j,{creators:c.artists,onCreatorClick:l}),(0,C.jsx)(B.J,{}),(0,C.jsx)(L.H,{releaseDate:n,timeZone:e.timezone})]}),u&&c.name?(0,C.jsx)(E.G,{images:s?c.coverArt.sources:[],className:W,imageTitle:c.name,targetDate:u}):null]})]})};var V=t(43758),H=t(34094),G=t(40997),K=t(5537),q=t(33279),Y=t(44947),J=t(49810);const Q=new Y.l("albumPreReleaseTracks","query","dfbdcf2688995adc2c2196fcdd7802b2a5137a2549b361aa7fb23cd6493f4672",null);var ee=t(11663),re=t(88176);const te={totalLength:0,items:[]};function ne(e){const r=e.preReleaseContent,t=[];if(r?.tracks)for(const e of r.tracks.items)t.push({uri:e.uri,name:e.name?e.name:"",isPlayable:e.playability.playable,durationMs:e.duration?.totalMilliseconds??0,hasOriginalAudio:e.hasOriginalAudio,artists:ae(e.artists.items),isExplicit:e.contentRating?.label===re.x7.Explicit,is19PlusOnly:e.contentRating?.label===re.x7.NineteenPlus});return{totalLength:r?.tracks.totalCount??0,items:t}}function ae(e){const r=[];for(const t of e)"Artist"===t.data.__typename&&r.push({name:t.data.profile.name,uri:t.data.uri});return r}const se=[q.$.INDEX,q.$.TITLE_AND_ARTIST,q.$.DURATION],ie=(0,m.memo)((function({ariaLabel:e,nrTracks:r,prereleaseUri:t,highlightUri:n,scrollToIndex:a,usePlayContextItem:s,hasHeaderRow:i=!0,initalTracks:o}){const{spec:l,UBIFragment:c}=(0,y.r)(p.k,{data:{uri:t}}),u=(e=>{const{request:r}=(0,m.useContext)(ee.j);return(0,m.useCallback)((async(t,n)=>{const a=await r(Q,{uri:e,offset:t,limit:n});for(const r of a?.data?.lookup||[])if("PreReleaseResponseWrapper"===r.__typename&&"PreRelease"===r.data.__typename&&r.data.uri===e)return ne(r.data);return te}),[r,e])})(t),d=(0,m.useRef)(!1),x=(0,m.useRef)(null),[h,f]=(0,m.useState)(null),g=(0,m.useCallback)((e=>({uri:e.uri})),[]);(0,m.useEffect)((()=>{x.current&&(h?x.current.scrollToIndex(h):a&&x.current.scrollToIndex(a))}),[h,a]);const v=(0,m.useCallback)((async(e,r)=>{const t=await u(e,r);if(n&&!h){const e=t.items.findIndex((e=>e?.uri===n));f(e||-1)}return t}),[u,n,h]),b=(0,m.useCallback)(((e,r)=>{const a=!d.current&&!!n&&n===e.uri;return a&&(d.current=!0),(0,C.jsx)(H.d,{uri:e.uri,isPlayable:e.isPlayable,name:e.name,trackNumber:r+1,index:r,artists:e.artists,playcount:0,contextUri:t,duration_ms:e.hasOriginalAudio?e.durationMs:null,usePlayContextItem:s,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,shouldHighLight:a,isReleased:e.isPlayable},r+e.uri)}),[n,t,s]);return(0,C.jsx)(c,{spec:l,children:(0,C.jsx)(K.a,{columns:se,children:(0,C.jsx)(G.S4,{ariaLabel:e,columns:se,hasHeaderRow:i,rowPlaceholder:V.Bz,renderRow:b,resolveItem:g,nrTracks:r,fetchTracks:v,limit:300,tracks:o,outerRef:x,columnPersistenceKey:"album-tracklist"},t)})})})),oe=new Y.l("albumPreRelease","query","e1a5537a42c3b8a687f10ae865c3b6776d6d797f8c0c272b2d40dc159a8e1a94",null),le=(e,r)=>(0,J.I)(oe,e,r),ce=(e,r=le)=>{const{data:t,loading:n,error:a}=r({uri:e},{staleTime:3e5,gcTime:36e5});return{loading:n,error:!!a,prerelease:(0,m.useMemo)((()=>{if(!t)return null;for(const r of t.lookup)if("PreReleaseResponseWrapper"===r.__typename&&"PreRelease"===r.data.__typename&&r.data.uri===e)return de(r.data);return null}),[t,e])}};function ue(e){return e.includes("℗")?{type:"P",text:e}:{type:"C",text:e}}function de(e){const r=e.preReleaseContent;let t;if(r){const n=ne(e);t={artists:me(r.artists.items),name:r.name??void 0,uri:r.uri,coverArt:{extractedColors:r.coverArt?.extractedColors?.colorRaw,sources:r.coverArt?.sources??[]},type:r.type,tracks:n,copyrights:r.copyright?.split("\n").map(ue)??[]}}return{uri:e.uri,releaseDate:e.releaseDate,timezone:e.timezone??void 0,content:t}}function me(e){const r=[];for(const t of e)"Artist"===t.data.__typename&&r.push({name:t.data.profile.name,id:t.data.id,uri:t.data.uri,images:t.data.visuals.avatarImage?.sources??[]});return r}var pe=t(98846);var xe=t(4937),he=t(57891),fe=t(46307),ge=t(78172);const ve="IVrwmRlzBI3lrWleZGbW",be="nPhSYFMXHpfImT4H04k3",je=e=>{const{uri:r}=e,{prerelease:t,loading:n,error:m}=ce(r),p=(e=>{const r=e?.content?.coverArt.extractedColors?.hex;return(0,pe.z)(r),r})(t),x=parseInt(new URLSearchParams((0,s.zy)().search).get("index")||"0",10),{usePlayContextItem:h}=(0,fe.P)({uri:r,pages:[{items:(f=t?.content?.tracks.items||[],f.filter((e=>e.isPlayable)).map((e=>({uri:e.uri,uid:null,type:ge.c.TRACK,provider:null}))))}]},{featureIdentifier:"album_prerelease"});var f;if(n||m||!t)return(0,C.jsx)(d.LoadingPage,{hasError:!!m,errorMessage:l.Ru.get("error.not_found.title.album")});if(t?.content?.uri&&function(e,r){if(!e.content?.uri||!e.releaseDate?.isoString)return!1;const t=(0,c.u)(e.releaseDate.isoString);if(t>0)return!1;return t<=-1*r}(t,1728e5)){const e=(0,o.Lce)(t?.content?.uri);if(e)return(0,C.jsx)(xe.$,{to:e.toURLPath(!0)})}return(0,C.jsxs)("section",{className:ve,children:[(0,C.jsx)(u.Q,{children:l.Ru.get("album.page-title",t.content?.name??"")}),(0,C.jsx)(X,{prerelease:t,backgroundColor:p}),(0,C.jsx)(S,{prerelease:t,backgroundColor:p}),t.content?.tracks.totalLength?(0,C.jsxs)("div",{className:"contentSpacing",children:[(0,C.jsx)(i.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:l.Ru.get("web-player.prerelease.album_tracklist_preview")}),(0,C.jsx)(ie,{prereleaseUri:r,ariaLabel:t.content?.name??l.Ru.get("error.not_found.title.album"),nrTracks:t.content?.tracks.totalLength??0,scrollToIndex:x,usePlayContextItem:h,initalTracks:t.content?.tracks.items,albumUri:t.content?.uri})]}):null,(0,C.jsx)("div",{className:a()(be,"contentSpacing"),children:(0,C.jsx)(he.Z,{copyrights:t.content?.copyrights??[]})})]})}},306:(e,r,t)=>{t.d(r,{Y:()=>l});var n=t(30758),a=t(72574),s=t(12469),i=t(37395),o=t(9043);const l=e=>{const r=(0,i.f)(),[t,l]=(0,n.useState)(!1);if(!(0,a.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const c=(0,n.useCallback)((n=>n&&!t?r.followUsers([e]):!n&&t?r.unfollowUsers([e]):Promise.resolve()),[r,t,e]);return(0,n.useEffect)((()=>{l(!1),r.isFollowing([e]).then((r=>{l(r[e]??!1)}))}),[r,e]),(0,o.N)(s.mc.OPERATION_COMPLETE,(r=>{r.data.uris.includes(e)&&!r.data.error&&(r.data.operation===s.JK.FOLLOW_USER?l(!0):r.data.operation===s.JK.UNFOLLOW_USER&&l(!1))})),[t,c]}},57891:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(87732);const a="rTMkDBDp47Eo12ZEQv4U";var s=t(86070);const i=({copyrights:e,courtesyLine:r})=>{const t=(e||[]).map(((e,r)=>{if(e.untyped)return(0,s.jsx)(n.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},r);const t=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let a;return a="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(n.Z,{as:"p",variant:"finale",dir:"auto",children:`${a} ${t}`},r)}));return r&&t.unshift((0,s.jsx)(n.Z,{as:"p",variant:"finale",dir:"auto",children:r},t.length)),(0,s.jsx)("div",{className:a,children:t})}},40841:(e,r,t)=>{function n(e){const r=new Date;return(e instanceof Date?e:new Date(e)).getTime()-r.getTime()}t.d(r,{u:()=>n})},28552:(e,r,t)=>{t.d(r,{w:()=>u});var n=t(30758),a=t(75690),s=t(93492),i=t(71338),o=t(49889),l=t(98866),c=t(82362);const u=({uri:e,isBook:r})=>{const{add:t,remove:u}=(0,l.p)("prerelease"),d=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,i.d)(),{spec:p,logger:x}=(0,c.r)(a.k,{data:{uri:e}});return{isPreSaved:d,addPresave:(0,n.useCallback)((async()=>{x.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await t(e),m(r?s.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):s.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[t,m,r,x,p,e]),removePresave:(0,n.useCallback)((async()=>{x.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await u(e)}),[x,u,p,e])}}},48455:(e,r,t)=>{t.d(r,{$:()=>a});var n=t(30758);const a=(e,r)=>{const t=(0,n.useRef)(e);(0,n.useEffect)((()=>{t.current=e}),[e]),(0,n.useEffect)((()=>{let e;function n(){e&&clearInterval(e)}if(null!==r)return e=setInterval((function(){t.current(n)}),r),n}),[r])}},39363:(e,r,t)=>{t.d(r,{V:()=>i});var n=t(30758),a=t(85387),s=t(72574);function i(e){const r=(0,s.o_h)(e);let t="";return r&&(t=r.toURLPath(!0)),function(e){const r=(0,a.Zp)();return(0,n.useCallback)((()=>{""!==e&&r(e)}),[e,r])}(t)}},98846:(e,r,t)=>{t.d(r,{f:()=>o,z:()=>i});var n=t(30758),a=t(668),s=t(7180);function i(e,r=a.l0o){const t=(0,s.as)();return(0,n.useEffect)((()=>(e&&t((0,s.Mo)(e)),()=>{t((0,s.Hf)())})),[e,t]),e||r}const o=({color:e,fallbackColor:r})=>(i(e,r),null)},37395:(e,r,t)=>{t.d(r,{f:()=>s});var n=t(68334),a=t(18308);const s=()=>(0,a.N)(n.t)},9043:(e,r,t)=>{t.d(r,{N:()=>s});var n=t(30758),a=t(37395);const s=(e,r)=>{const t=(0,a.f)();(0,n.useEffect)((()=>t.getEvents().addListener(e,r)),[e,t,r])}},33887:(e,r,t)=>{t.d(r,{Bj:()=>a,T4:()=>s,kt:()=>i});var n=t(72574);function a(e,r){if(!r)return null;const t=(0,n.o_h)(r);if(!t||!(0,n.APS)(t))return null;const a=(0,n.XIp)(t.username);return e.find((e=>e.username===a))??null}function s(e){const r=e.getCurrentSession(),t=r?.sessionOwnerId;return t?r.sessionMembers.find((e=>e.id===t))??null:null}function i(e,r){if(!r||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const t=e.getCurrentSession(),n=a(t?.sessionMembers??[],r),i=s(e);return!!n&&n?.username!==i?.username}}}]);
//# sourceMappingURL=xpui-routes-album-prerelease.js.map