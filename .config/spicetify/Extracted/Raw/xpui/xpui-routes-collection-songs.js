"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8828],{61621:(e,t,l)=>{l.d(t,{M:()=>R,f:()=>j});var a=l(30758),s=l(97500),r=l.n(s),n=l(61e3),i=l(11205),o=l(106),c=l(93492),d=l(80600),u=l(38557),g=l(45176);var m=l(92197),p=l(22220),f=l(15283),h=l(97137),y=l(49753),x=l(48975),k=l(16674),b=l(46440);const T="x-downloadButton-DownloadButton",C="x-downloadButton-button",I="x-downloadButton-cancelDownload",S="x-downloadButton-progress";var w=l(86070);let R=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const A=e=>{const{currentTarget:t,detail:l}=e;l>0&&t&&t.blur()},j=({uri:e,isFollowing:t,onFollow:l,size:s=R.sm,className:j,onClick:E=()=>{},showUpsell:v=!0,canDownload:D=!0,condensedAll:F,condensed:N})=>{const[P,L]=(0,a.useState)(!1),{capability:M,availability:_,addDownload:O}=(0,k.$)(e,D),U=!(0,x.n)(),B=(0,y.V)(),$=(0,b.e)(e);((e,t)=>{const l=(0,d.i)(),s=(0,a.useRef)(!1);(0,a.useEffect)((()=>{e===g.kw.DOWNLOADING&&!1===s.current&&(s.current=!0,l.say(c.Ru.get("download.downloading",t.totalItems)))}),[l,e,t]);const r=(0,u.Z)(e);(0,a.useEffect)((()=>{r===g.kw.DOWNLOADING&&e===g.kw.YES&&(s.current=!1,l.say(c.Ru.get("download.complete")))}),[l,r,e])})(_,$);const H=(0,a.useCallback)((e=>{e.preventDefault(),M===g.vs.NO_PERMISSION?E(e,g.NV.NO_PERMISSION):(!1===t?(l(),L(!0)):O(),E(e,g.NV.ADD)),A(e)}),[O,M,t,E,l]),z=(0,a.useCallback)((t=>{t.preventDefault(),B(e),A(t),E(t,g.NV.REMOVE)}),[e,B,E]);if((0,a.useEffect)((()=>{!0===P&&!0===t&&(O(),L(!1))}),[t,P,O]),_===g.kw.YES)return(0,w.jsx)(m.Zp,{label:c.Ru.get("download.remove"),children:(0,w.jsx)(n.H,{className:j,onClick:z,iconOnly:i.F,semanticColor:"textBrightAccent",size:s,"aria-label":c.Ru.get("download.remove"),"aria-checked":!0,condensedAll:F,condensed:N})});if(M===g.vs.NO_CAPABILITY||M===g.vs.NO_PERMISSION_HIDE)return null;if(M===g.vs.NO_PERMISSION)return v?(0,w.jsx)("div",{className:r()(T,j),children:(0,w.jsx)(h.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,w.jsx)(f.z,{children:(0,w.jsx)("span",{children:c.Ru.get("download.upsell")})}),renderInline:!1,children:(0,w.jsx)("div",{children:(0,w.jsx)(m.Zp,{label:c.Ru.get("download.download"),children:(0,w.jsx)(n.H,{onClick:H,iconOnly:o.i,size:s,"aria-label":c.Ru.get("download.download"),"aria-checked":!1,condensedAll:F,condensed:N,disabled:U})})})})}):null;if(_===g.kw.NO)return(0,w.jsx)(m.Zp,{label:c.Ru.get("download.download"),children:(0,w.jsx)(n.H,{className:j,onClick:H,iconOnly:o.i,size:s,"aria-label":c.Ru.get("download.download"),"aria-checked":!1,condensedAll:F,condensed:N,disabled:U})});let V;switch(s){case R.xs:V=16;break;case R.sm:V=24;break;default:V=32}return(0,w.jsxs)("div",{className:r()(I,j),role:"switch","aria-checked":!0,children:[(0,w.jsx)(m.Zp,{label:c.Ru.get("download.cancel"),children:(0,w.jsx)("button",{style:{height:V,width:V},className:r()(C,j),onClick:z,"aria-label":c.Ru.get("download.cancel")})}),(0,w.jsx)("span",{className:r()(S),children:(0,w.jsx)(p.C,{"aria-valuetext":c.Ru.get("progress.downloading-tracks"),percentage:$.percentage,size:V})})]})}},77721:(e,t,l)=>{l.d(t,{s:()=>f});var a=l(30758),s=l(97500),r=l.n(s),n=l(45143),i=l(43683),o=l(51676),c=l(70824);const d="IVnoxrO3iL_tz5ULI8g_";var u=l(86070);const g={marginBlockEnd:0,willChange:"transform, opacity"},m=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:l,resetFilterIds:s,toggleFilterId:i,className:o,innerRef:c,onFilterClick:m,index:p=0,...f})=>{const h=f.selected,y=(0,a.useCallback)((()=>{if(!e)return s(),void m(null,!1,p);m(e,!!h,p),i(e)}),[e,s,i,m,h,p]),x=(0,a.useCallback)((e=>{e.detail>1||l||y()}),[l,y]);return(0,u.jsx)(n.v,{...f,className:r()(o,{[d]:l}),onClick:x,selectedColorSet:"invertedLight",secondary:h&&!t,style:g,ref:c,tabIndex:-1})},p=({filterId:e=null,isPlaceholder:t,resetFilterIds:l,toggleFilterId:s,className:n,innerRef:o,onFilterClick:c,index:m=0,...p})=>{const f=p.selected,h=(0,a.useCallback)((()=>{if(!e)return l(),void c(null,!1,m);c(e,!!f,m),s(e)}),[e,l,s,c,f,m]),y=(0,a.useCallback)((e=>{e.detail>1||t||h()}),[t,h]);return(0,u.jsx)(i.m,{...p,"aria-label":p["aria-label"],className:r()(n,{[d]:t}),onClick:y,style:g,ref:o,tabIndex:-1})},f=(0,a.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:l,toggleFilterId:s,resetFilterIds:r,onFilterClick:n,ariaLabel:i,clearBtnAriaLabel:d,className:g,applyLightThemeControls:f=!1}){const h=!(l||t),y=h?e:[...l??[],...t??[]],x=(0,a.useRef)(null),k=(0,a.useCallback)((()=>{(0,c.MS)(x.current,x.current?.nextElementSibling instanceof HTMLElement?x.current?.nextElementSibling:null),r()}),[r]);return 0===y.length?null:(0,u.jsxs)(o.FN,{className:g,ariaLabel:i,applyLightThemeControls:f,children:[!!l?.length&&(0,u.jsx)(p,{resetFilterIds:k,toggleFilterId:s,onFilterClick:n,"aria-label":d??i,innerRef:x}),y.map(((e,t)=>{const a=l?.includes(e),i=0===t;return(0,u.jsx)(m,{filterId:e.id,isPrimaryFilter:i,isPlaceholder:h,onFilterClick:n,resetFilterIds:r,toggleFilterId:s,selected:a,index:t,children:e.getName()},e.id)}))]})}))},3204:(e,t,l)=>{l.d(t,{b:()=>I});var a=l(30758),s=l(93492),r=l(70225),n=l(26687),i=l(464),o=l(13417),c=l(84676),d=l(78281),u=l(39657),g=l(40997),m=l(33279),p=l(71924),f=l(24395),h=l(36663),y=l(99802),x=l(98628),k=l(95717),b=l(86070);const T=new Set(o.gc),C=new Set([]),I=a.memo((function({nrTracks:e,collectionUri:t,initialItems:l,uri:I,sortable:S=!0,scrollToUri:w,usePlayContextItem:R,outerDomRef:A,spec:j,isCompactMode:E=!1,tagFilter:v}){const D=(0,h.f)(),F=(0,a.useRef)(null),{filter:N}=(0,a.useContext)(i.g),P=(0,a.useRef)((()=>{})),[L,M]=(0,a.useState)([]),{sortState:_,setSortState:O}=(0,a.useContext)(o.cL),U=(0,y.s)(),B=(0,c.w)(),$=(0,a.useCallback)(((e,t)=>{e===m.$.ADDED_AT?O({column:m.$.ADDED_AT,order:_.order===m.H.ASC?m.H.DESC:m.H.ASC}):O((0,r.So)(e,_)),j&&U.logInteraction(j.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[U,O,_,j]);(0,a.useEffect)((()=>{F.current&&w&&F.current.scrollToItem({uri:w})}),[w]);const H=(0,a.useCallback)((e=>{const t=e.map((e=>e.uri));P.current(),D.remove({uris:t})}),[D]),z=(0,a.useCallback)(((e,t)=>{P.current=t,e.length>1?M(e):H(e)}),[H]),[,V]=(0,d.z)(),K=(0,a.useCallback)((async(e,t)=>{const l=await D.getTracks({offset:e,limit:t,uri:I,sort:(0,p.c)(_),filters:[N??null,v??null].filter(x.P)}),a=l?.totalLength??0;return{items:l?.items??[],totalLength:a}}),[N,v,D,_,I]),X=(0,a.useCallback)(((e,l)=>{const a=(0,k.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,b.jsx)(u.W,{index:l,contextUri:t,uri:e.uri,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,albumOrShow:e.album,isExplicit:e.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:e.isLocal,addedBy:[],dateAdded:e.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:a?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:R,allowedDropTypes:[],isDisliked:!1,playlistName:s.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:E,hasAssociatedVideo:e.hasAssociatedVideo},l+e.uri)}),[t,R,E]),q=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uri})),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.pZ,{value:"liked-songs-tracklist",children:(0,b.jsx)(g.S4,{ariaLabel:s.Ru.get("sidebar.liked_songs"),hasHeaderRow:!0,columns:B,sortableColumns:D.getCapabilities().canSortTracksAndEpisodes&&S?T:C,sortState:_,onSort:$,renderRow:X,resolveItem:q,onRemove:z,nrTracks:e,fetchTracks:K,limit:50,canFetchAllTracks:D.getCapabilities().canFetchAllItems,outerRef:F,outerDomRef:A,tracks:l,onNrValidItemsChange:V,isCompactMode:E,columnPersistenceKey:"liked-songs-tracklist"},t)}),(0,b.jsx)(n.F,{title:s.Ru.get("remove_from_your_liked_songs"),isOpen:L.length>0,tracks:L,onClose:e=>{e.stopPropagation(),M([])},onRemove:H})]})}))},67391:(e,t,l)=>{l.d(t,{d:()=>c});var a=l(97500),s=l.n(a),r=l(2312),n=l(22805);const i="UyzJidwrGk3awngSGIwv";var o=l(86070);const c=({durationMs:e,className:t,displaySeconds:l})=>{const{hours:a,minutes:c,seconds:d}=(0,r.S)(e);return l=!1!==l&&!a&&d,(0,o.jsx)("span",{className:s()(i,t),children:(0,n.j)({h:a,m:c,s:l?d:0})})}},80600:(e,t,l)=>{l.d(t,{i:()=>r});var a=l(30758);class s{constructor(e={}){this.settings={level:e.level||"polite",parent:e.parent||document.body,idPrefix:e.idPrefix||"live-region-",delay:e.delay||0},this.currentRegion=document.createElement("span")}say(e,t=this.settings.delay){this.clearNode(),this.currentRegion=document.createElement("span"),this.currentRegion.id=this.settings.idPrefix+Math.floor(1e4*Math.random());const l="assertive"!==this.settings.level?"status":"alert";this.currentRegion.setAttribute("aria-live",this.settings.level),this.currentRegion.setAttribute("role",l),this.currentRegion.setAttribute("style","clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px"),this.settings.parent.appendChild(this.currentRegion),window.setTimeout((()=>{this.currentRegion.textContent=e}),t)}clearNode(){const e=this.settings.parent.querySelector(`[id^="${this.settings.idPrefix}"]`);e&&this.settings.parent.removeChild(e)}}const r=({delay:e,idPrefix:t,level:l,parent:r}={})=>{const n=(0,a.useMemo)((()=>new s({delay:e,idPrefix:t,level:l,parent:r})),[e,t,l,r]);return(0,a.useEffect)((()=>()=>{n.clearNode()}),[n]),n}},71924:(e,t,l)=>{l.d(t,{c:()=>i});var a=l(70225),s=l(21950),r=l(28954);const n={[r.nw.ADDED_AT]:s.Sw.ADDED_AT,[r.nw.ADDED_BY]:null,[r.nw.ALBUM]:s.Sw.ALBUM_NAME,[r.nw.ARTIST]:s.Sw.ARTIST_NAME,[r.nw.DURATION]:null,[r.nw.TITLE]:s.Sw.NAME,[r.nw.SHOW_NAME]:null,[r.nw.PUBLISH_DATE]:null},i=e=>{const t=(0,a.Xt)(e);if(!t)return;const l=n[t.field],s=t.order;return l&&s?{field:l,order:s}:void 0}},82442:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ke});var a=l(30758),s=l(62411),r=l(85387),n=l(32825),i=l(3118),o=l(72672),c=l(72574),d=l(93492),u=l(64359),g=l(89370),m=l(8030),p=l(464),f=l(13417),h=l(78281),y=l(5537),x=l(33279),k=l(42297),b=l(85277),T=l(61621),C=l(92533),I=l(53185),S=l(28525),w=l(32485),R=l(26918),A=l(79059),j=l(84676),E=l(82362),v=l(58636),D=l(86070);const F=a.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,E.r)(w.E,{}),s=(0,a.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),r=(0,a.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),n=(0,j.w)().filter((({columnType:e})=>f.gc.includes(e))).map((({columnType:e})=>e));return(0,D.jsxs)("div",{className:v.A.searchBoxContainer,children:[(0,D.jsx)(a.Suspense,{fallback:null,children:(0,D.jsx)(R.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:s,onClear:r})}),(0,D.jsx)(A.d,{columns:n})]})}));var N=l(97500),P=l.n(N),L=l(77721),M=l(98929),_=l(46710),O=l(68813),U=l(90630),B=l(9875),$=l(36663),H=l(26239),z=l(72288);const V="liked-songs-tags";function K(){const e=(0,i.NC)(U.cLA),[t,l]=(0,z.x)("liked-songs-current-tag-filter",null);return[e?t:null,l]}var X=l(99802);const q="q_yjkS1y6URH4Xm7gZfw",Z=e=>({id:e.filter,getName:()=>e.name,ubiId:e.name}),G=(0,a.memo)((({spec:e,nrTracks:t})=>{const{tags:l,currentTag:s,setCurrentTag:r}=function({nrTracks:e}){const t=(0,$.f)(),l=(0,M.jE)(),[s,r]=K(),[n,i]=(0,a.useState)([]),{data:o}=(0,_.I)({queryKey:[V],queryFn:()=>t?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:O.rX,refetchOnWindowFocus:!1});(0,a.useLayoutEffect)((()=>{const t=o?.find((e=>e.filter===s));if(!t&&s){if(e>0&&o?.length)return;r(null)}i(o??[])}),[s,r,e,o]);const c=(0,a.useCallback)((({data:{list:e}})=>{e===B.Ir.TRACKS&&l.invalidateQueries({queryKey:[V]})}),[l]);(0,H.l)(B.UV.UPDATE,c);const d=(0,a.useMemo)((()=>n.find((e=>e.filter===s))),[s,n]),u=(0,a.useCallback)((e=>{r(e?.filter??null)}),[r]);return{tags:s||e?n:[],currentTag:d,setCurrentTag:u}}({nrTracks:t}),n=(0,X.s)(),i=(0,a.useCallback)(((t,a,s)=>{let i;if(!t)return i=e.clearButtonFactory().hitClearFilter(),void n.logInteraction(i);const o=l.find((({filter:e})=>e===t));if(!o)return;const c=e.filterChipFactory({identifier:o.name,position:s});a?(i=c.hitClearFilter(),r(null)):(i=c.hitFilter(),o&&r(o)),n.logInteraction(i)}),[n,r,e,l]),o=s?[]:l.map(Z),c=s?[Z(s)]:[];return l.length?(0,D.jsx)(b.S,{children:(0,D.jsx)(L.s,{availableFilters:o,selectedFilters:c,toggleFilterId:()=>{},resetFilterIds:()=>r(null),onFilterClick:i,ariaLabel:d.Ru.get("web-player.liked-songs.liked-songs-filter-tags"),clearBtnAriaLabel:d.Ru.get("web-player.liked-songs.clear-filter"),className:P()(q),applyLightThemeControls:!0})}):null}));var W=l(16944),Y=l(15508),Q=l(12200),J=l(96437),ee=l(45176),te=l(28954),le=l(42262),ae=l(64640);const se="ivuDaTbfBpBewwr39aDQ",re=a.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:l,spec:s,logger:r,backgroundColor:n,canSort:o,canFilter:c}){const{uri:u,name:g,totalLength:m}=e,p=(0,a.useRef)(null),f=(0,a.useMemo)((()=>s.actionBarFactory()),[s]),h=(0,a.useMemo)((()=>f.shuffleButtonContainerFactory()),[f]),y=(0,a.useMemo)((()=>f.filtersFactory()),[f]),x=m>0,w=m>0,R=o&&c,A=(0,Q.X)(),j=(0,a.useCallback)(((e,t)=>{const l=f.downloadButtonFactory();t===ee.NV.ADD?r.logInteraction(l.hitDownload({itemToDownload:u})):t===ee.NV.REMOVE?r.logInteraction(l.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===ee.NV.NO_PERMISSION&&r.logInteraction(l.hitUiReveal())}),[f,r,u]),E=(0,J.j)(),v=(0,i.NC)(U.cLA);return(0,D.jsxs)(k.E,{backgroundColor:n,children:[(0,D.jsxs)(b.S,{children:[w?(0,D.jsx)(I.D,{onClick:t,isPlaying:l,size:E,uri:u,ariaPauseLabel:d.Ru.get("playlist.a11y.pause",g),ariaPlayLabel:d.Ru.get("playlist.a11y.play",g)}):null,A&&(0,D.jsx)(le.r,{spec:h,children:(0,D.jsx)(Y.Y,{entityName:g,contextUri:u,activationPlacement:"bottomEnd",size:E})}),(0,D.jsx)(T.f,{uri:u,canDownload:x,isFollowing:!0,onFollow:()=>{},size:E,onClick:j,condensed:!0}),R?(0,D.jsx)(le.r,{spec:f,children:(0,D.jsx)(C.u,{property:U.IZ_,renderNewExperience:()=>(0,D.jsx)("div",{className:se,children:(0,D.jsx)(W.d,{sortOptions:[te.nw.TITLE,te.nw.ADDED_AT,te.nw.ARTIST,te.nw.ALBUM,te.nw.DURATION],defaultSortField:te.nw.ADDED_AT,filterPlaceholder:d.Ru.get("playlist.search_in_playlist"),enableViewModeMenu:!0})}),renderOldExperience:()=>(0,D.jsx)(F,{tracklistDomRef:p})})}):(0,D.jsx)("div",{className:se,children:(0,D.jsx)(C.u,{property:ae.mA,renderNewExperience:()=>(0,D.jsx)(S.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),v&&(0,D.jsx)(G,{spec:y,nrTracks:m})]})}));var ne=l(71924),ie=l(39657),oe=l(40997);var ce=l(53629),de=l(82619);var ue=l(80563),ge=l(37723),me=l(86422),pe=l(27653);const fe=({ariaLabel:e,columns:t,columnPersistenceKey:l,renderItem:s,defaultSortField:n})=>{const{playlist:i}=(0,ge.g)(),o=(0,pe.m)(),{canFetchAllTracks:c}=o.getCapabilities(),d=(0,ue.K)(),u=(0,a.useRef)(null),{isCompactMode:g}=(0,me.a)(),m="custom-order"===n;(e=>{const t=(0,r.wQ)(),l=(0,r.zy)(),s="POP"!==t?new URLSearchParams(l.search).get("uid"):null;(0,a.useLayoutEffect)((()=>{e.current&&s&&e.current.scrollToItem({uid:s})}),[s,e])})(u);const{trackListSortState:p,onSort:f}=((e,t)=>{const{sortState:l,setSortState:s}=(0,ce.k)(),r=(0,a.useMemo)((()=>(0,de.Ap)(e,l)),[e,l]),n=(0,a.useCallback)((e=>{s((0,de.hK)(e,r,t))}),[t,s,r]);return{trackListSortState:r,onSort:n}})(t,m),h=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),x=(0,a.useMemo)((()=>new Set((0,de.g6)(t))),[t]);return(0,D.jsx)(y.a,{columns:t,children:(0,D.jsx)(oe.g0,{ariaLabel:e,hasHeaderRow:!0,columns:t,sortableColumns:x,sortState:p,onSort:f,renderRow:s,resolveItem:h,itemsCache:d,canFetchAllTracks:c,isCompactMode:g,columnPersistenceKey:l,outerRef:u},i.metadata.uri+g)})};var he=l(24395),ye=l(65494),xe=l(95717);const ke=[x.$.INDEX,x.$.TITLE_AND_ARTIST,x.$.ALBUM,x.$.ADDED_AT,x.$.DURATION],be=a.memo((function({usePlayContextItem:e}){const{isCompactMode:t}=(0,me.a)(),l=(({isCompactMode:e=!1})=>{const t=[...ke];return e&&t.splice(t.indexOf(x.$.TITLE_AND_ARTIST),1,x.$.TITLE,x.$.ARTIST),t})({isCompactMode:t}),{playlist:{metadata:s}}=(0,ge.g)(),r=(0,a.useCallback)(((l,a)=>{if(!(0,ye.Jy)(l))return(0,D.jsx)(D.Fragment,{});const r=(0,xe.g)(l.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,D.jsx)(ie.W,{index:a,contextUri:s.uri,uri:l.uri,isPlayable:l.isPlayable,duration_ms:l.duration.milliseconds,name:l.name,artists:l.artists,albumOrShow:l.album,isExplicit:l.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:l.isLocal,addedBy:[],dateAdded:l.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:l.is19PlusOnly,type:l.type,imgUrl:r?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:e,allowedDropTypes:[],isDisliked:!1,playlistName:d.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:t,hasAssociatedVideo:l.hasAssociatedVideo},a+l.uri)}),[s.uri,e,t]);return(0,D.jsx)(he.pZ,{value:"liked-songs-tracklist",children:(0,D.jsx)(fe,{ariaLabel:d.Ru.get("sidebar.liked_songs"),columns:l,renderItem:r,columnPersistenceKey:"liked-songs-tracklist",defaultSortField:te.nw.ADDED_AT})})}));var Te=l(98197),Ce=l(98846),Ie=l(46106),Se=l(46307),we=l(27931);const Re=()=>{const{playlist:{metadata:e},contentsOptions:t}=(0,ge.g)(),l=(0,pe.m)(),{canSort:s,canFilter:r}=l.getCapabilities(),{uri:i,name:c,totalLength:m}=e,p=(0,Ce.z)("#5038a0"),{spec:f,logger:y}=(0,E.r)(o.k,{data:{uri:i}}),x=a.useMemo((()=>f.headerFactory()),[f]),k=a.useMemo((()=>f.tracklistFactory()),[f]),{isPlaying:b,togglePlay:T,usePlayContextItem:C,isActive:I}=(0,Se.P)((0,we.A)(e.uri,t),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),S=()=>{const e=(0,Ie.$I)({isPlaying:b,isActive:I,spec:f.actionBarFactory().playButtonFactory(),logger:y,uri:i});T({loggingParams:e})},[w]=(0,h.z)();return(0,D.jsxs)("section",{role:"presentation",className:v.A.playlist,"data-testid":"playlist-page",children:[(0,D.jsx)(u.Q,{children:d.Ru.get("playlist.page-title",c)}),(0,D.jsx)(Te.x,{metadata:{...e,hasSpotifyTracks:!0},totalItems:w,isPlaying:b,togglePlay:S,backgroundColor:p,specLikedSongs:x}),(0,D.jsx)(re,{metadata:e,onClickTogglePlay:S,isPlaying:b,spec:f,logger:y,backgroundColor:p,canSort:s,canFilter:r}),(0,D.jsx)("div",{className:"contentSpacing",children:m>0?(0,D.jsx)(le.r,{spec:k,children:(0,D.jsx)(be,{usePlayContextItem:C})}):(0,D.jsx)(g.p,{message:d.Ru.get("collection.empty-page.songs-subtitle"),title:d.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,D.jsx)(n.v,{"aria-hidden":"true"})})})]})};var Ae=l(3204),je=l(88308),Ee=l(52514),ve=l(31404);var De=l(9254),Fe=l(98962),Ne=l(79101),Pe=l(42035),Le=l(98628),Me=l(16514),_e=l(39182),Oe=l(46019);function Ue(e,t){if(void 0===t||0===t.length)return;const l=function(e){return e.map((e=>{const{field:t,operator:l,value:a}=e;if(t!==Pe.Hh.TEXT&&t!==Pe.Hh.TAGS||l!==Pe.tl.CONTAINS)throw new Error("Invalid filter params!");return`${Be[t]} ${$e[l]} "${a}"`})).join(",")}(t),a=(0,Oe.t)(t);e.url=`context://${e.uri}?filter=${encodeURIComponent(a)}`,e.metadata=e.metadata??{},e.metadata[_e.W.FILTERING_PREDICATE]=l,e.metadata[_e.W.LIST_UTIL_FILTER]=a}const Be={[Pe.Hh.TEXT]:"text",[Pe.Hh.TAGS]:"tags"},$e={[Pe.tl.CONTAINS]:"=^#"};const He=[x.$.INDEX,x.$.TITLE_AND_ARTIST,x.$.ALBUM,x.$.ADDED_AT,x.$.DURATION],ze=({data:e,canFilter:t,canSort:l})=>{const{uri:s,name:i,totalLength:c}=e.metadata,k=(0,a.useRef)(null),b=(0,Ce.z)("#5038a0"),[T]=K(),{filter:C}=(0,a.useContext)(p.g),{sortState:I,setSortState:S}=(0,a.useContext)(f.cL),{spec:w,logger:R}=(0,E.r)(o.k,{data:{uri:s}}),A=a.useMemo((()=>w.headerFactory()),[w]),j=a.useMemo((()=>w.tracklistFactory()),[w]);(0,a.useEffect)((()=>{null===I.column&&S({column:x.$.ADDED_AT,order:x.H.DESC})}),[I,S]);const F=(0,r.wQ)(),N=(0,r.zy)(),P="POP"!==F?new URLSearchParams(N.search).get("uri"):null,{isPlaying:L,togglePlay:M,usePlayContextItem:_,isActive:O}=(0,Se.P)(function(e,t,l){const a={uri:e};return(0,Me.q)(a,t),Ue(a,l?.map((e=>(0,Pe.HI)(e)??null)).filter(Le.P)),a}(s,(0,ne.c)(I),[C,T].filter(Le.P)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),U=()=>{const e=(0,Ie.$I)({isPlaying:L,isActive:O,spec:w.actionBarFactory().playButtonFactory(),logger:R,uri:s});M({loggingParams:e})},[B]=(0,h.z)(),{isCompactMode:$}=(0,me.a)(),H=(({isCompactMode:e=!1})=>{const t=[...He];return e&&t.splice(t.indexOf(x.$.TITLE_AND_ARTIST),1,x.$.TITLE,x.$.ARTIST),t})({isCompactMode:$});return(0,D.jsx)(y.a,{columns:H,children:(0,D.jsxs)("section",{role:"presentation",className:v.A.playlist,"data-testid":"playlist-page",children:[(0,D.jsx)(u.Q,{children:d.Ru.get("playlist.page-title",i)}),(0,D.jsx)(Te.x,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:B,isPlaying:L,togglePlay:U,backgroundColor:b,specLikedSongs:A}),(0,D.jsx)(re,{metadata:e.metadata,onClickTogglePlay:U,isPlaying:L,spec:w,logger:R,backgroundColor:b,canSort:l,canFilter:t}),(0,D.jsx)("div",{className:"contentSpacing",children:c>0?(0,D.jsx)(a.Suspense,{fallback:(0,D.jsx)(m.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.request-collection-tracks-failure")}),children:(0,D.jsx)(le.r,{spec:j,children:(0,D.jsx)(Ae.b,{nrTracks:c,collectionUri:s,scrollToUri:P,usePlayContextItem:_,outerDomRef:k,spec:j,initialItems:e.contents.items,isCompactMode:$,tagFilter:T})})}):(0,D.jsx)(g.p,{message:d.Ru.get("collection.empty-page.songs-subtitle"),title:d.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,D.jsx)(n.v,{"aria-hidden":"true"})})})]})})},Ve=a.memo((function({user:e,uri:t}){const{filter:l}=(0,a.useContext)(p.g),{sortState:s}=(0,a.useContext)(f.cL),[r]=K(),n=function(e,t,l){const s=(0,$.f)(),r=(0,M.jE)(),n=(0,je.U0)((()=>["useLikedSongs",e,l]),[e,l]),{data:i}=(0,_.I)({queryKey:n(),queryFn:()=>s.getTracks(l),gcTime:18e5,placeholderData:O.rX,refetchOnWindowFocus:!1}),o=(0,a.useCallback)((()=>{r.invalidateQueries({queryKey:n()})}),[r,n]);(0,H.l)(B.UV.UPDATE,o);const c=(0,Ee.$R)(t.id);return c&&i?{metadata:{uri:e,name:c.name,images:c.images,totalLength:i?.totalLength,unfilteredTotalLength:i.unfilteredTotalLength,owner:(0,ve.w)(t)},contents:i}:null}(t,e,{offset:0,limit:25,sort:(0,ne.c)(s),filters:[l,r].filter(Le.P)}),i=(0,$.f)().getCapabilities();return n?(0,D.jsx)(ze,{data:n,canFilter:i.canFilterTracksAndEpisodes&&n.metadata.unfilteredTotalLength>0,canSort:i.canSortTracksAndEpisodes&&n.metadata.unfilteredTotalLength>0}):(0,D.jsx)(m.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline})})),Ke=()=>{const{user:e}=(0,s.d4)(Fe.Ht);if((0,i.NC)(U.IZ_,{loadingValue:!1}))return(0,D.jsx)(De.W,{uri:Ne.DK,children:(0,D.jsx)(Re,{})});if(null===e)return null;const t=(0,c.fHB)(e.id).toURI();return(0,D.jsx)(f.sn,{uri:t,children:(0,D.jsx)(p.s,{uri:t,children:(0,D.jsx)(h.S,{children:(0,D.jsx)(Ve,{uri:t,user:e})})})})}},38557:(e,t,l)=>{l.d(t,{Z:()=>s});var a=l(30758);function s(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map