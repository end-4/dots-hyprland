"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{61407:(e,t,a)=>{a.d(t,{I:()=>l});var i=a(30758),s=a(61621),n=a(56116),r=a(67759),o=a(86070);const l=i.memo((function({uri:e,size:t=s.M.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,r.A)(e),h=(0,n.W)(),p=(0,i.useCallback)((()=>{h({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[h,e,u,m]);return(0,o.jsx)(s.f,{className:a,isFollowing:u,onFollow:p,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},10161:(e,t,a)=>{a.d(t,{b:()=>l});var i=a(30758),s=a(39782),n=a(56116),r=a(67759),o=a(86070);const l=i.memo((function({uri:e,className:t,onClick:a,size:l=s.t.xs,condensed:c}){const[d,u]=(0,r.A)(e),m=(0,n.W)(),h=(0,i.useCallback)((t=>{t.preventDefault(),m({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),a&&a(!d),u(!d)}),[m,e,d,a,u]);return(0,o.jsx)(s.M,{className:t,size:l,onClick:h,isAdded:!!d,isEpisode:!0,condensed:c})}))},84736:(e,t,a)=>{a.d(t,{o:()=>h});var i=a(93492),s=a(92907),n=a(30848),r=a(97194),o=a(47300),l=a(4608),c=a(12367),d=a(39550),u=a(69778),m=a(86070);const h=({images:e,name:t,uri:a,publisher:h,sharingInfo:p,mediaType:g,isHero:x=!1,onClick:y,testId:v,index:b,requestId:j,color:f,variant:C,logCardImpressions:w=!1})=>{let k;const S=g===u.Q.MIXED?i.Ru.get("type.show"):i.Ru.get("card.tag.show");return k=x?(0,m.jsx)(o.A,{index:b,onClick:y,delegatePlayback:!0,headerText:t,featureIdentifier:"show",uri:a,isPlayable:!1,renderCardImage:()=>(0,m.jsx)(n.M,{isHero:!0,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsxs)(r.c,{isHero:!0,children:[(0,m.jsx)(l.t,{children:S}),h&&(0,m.jsx)("span",{children:h})]}),testId:v,requestId:j,logCardImpressions:w}):(0,m.jsx)(s.Z,{variant:C,onClick:y,isPlayable:!1,delegatePlayback:!0,headerText:t,featureIdentifier:"show",uri:a,index:b,renderCardImage:()=>(0,m.jsx)(n.M,{isHero:x,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsx)(r.c,{children:h&&(0,m.jsx)("span",{children:h})}),testId:v,requestId:j,logCardImpressions:w}),(0,m.jsx)(c.h,{menu:(0,m.jsx)(d.H,{uri:a,sharingInfo:p}),children:k})}},18340:(e,t,a)=>{a.d(t,{G:()=>S});var i=a(97500),s=a.n(i),n=a(93492),r=a(13505);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var h=a(86070);const p=({value:e,label:t,hasDivider:a=!1})=>(0,h.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,h.jsx)(r.E,{variant:"titleSmall",className:s()({[u]:a}),children:e}),(0,h.jsx)(r.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=a(30758);const x=6e4,y=36e5,v=864e5;var b=a(40841),j=a(48455);const f={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/v),hours:Math.floor(t%v/y),minutes:Math.floor(t%y/x),seconds:Math.floor(t%x/1e3)}}(e):f}var w=a(55117),k=a(78172);const S=({targetDate:e,className:t,onComplete:a,images:i,imageTitle:r})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,t)=>{const a=(0,g.useRef)(t);a.current=t;const[i,s]=(0,g.useState)((()=>C((0,b.u)(e))));return(0,j.$)((t=>{const i=(0,b.u)(e),n=C(i);s(n),i<=0&&(t(),a.current?.())}),1e3),i})(e,a),v=void 0!==i&&i.length>0&&r,f=n.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,h.jsxs)("div",{className:s()(o,t,{[l]:v}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:m,children:f}),v&&(0,h.jsx)(w.b,{images:i,type:k.c.ALBUM,shape:w.u.ROUNDED_CORNERS,className:d,title:r}),(0,h.jsx)(p,{value:c,label:n.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,h.jsx)(p,{value:u,label:n.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,h.jsx)(p,{value:x,label:n.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(p,{value:y,label:n.Ru.get("web-player.prerelease.seconds",y)})]})}},3996:(e,t,a)=>{a.d(t,{K:()=>d});var i=a(30758),s=a(97500),n=a.n(s),r=a(42001),o=a(64212),l=a(88520),c=a(86070);const d=(0,i.memo)((function({dragUri:e,dragMimeType:t,onContextMenu:a,onTouchStart:i,onTouchEnd:s,onClick:d,ariaLabel:u,...m}){const{draggable:h,onDragStart:p}=(0,o.P)({itemUris:e?[e]:[],itemMimeTypes:t?[t]:[],dragLabelText:m.name}),g={className:n()(l.A.imageContainer,l.A.imageContainerNew,{[l.A.imageContainerClickable]:!!d}),draggable:h&&!!e,onDragStart:p,onContextMenu:a,onTouchStart:i,onTouchEnd:s,children:(0,c.jsx)(r.b,{...m})};return d?(0,c.jsx)("button",{...g,"aria-label":u,onClick:d}):(0,c.jsx)("div",{...g})}))},44746:(e,t,a)=>{a.d(t,{X:()=>o});var i=a(668),s=a(75657);const n={container:"blfR_YJUsKUvdgTejBSb"};var r=a(86070);function o({children:e}){const t=(0,s.w)({contrast:"higherContrast"});return(0,r.jsx)("div",{className:n.container,style:{"--text-subdued":i.WYM,...t},children:e})}},21017:(e,t,a)=>{a.d(t,{W:()=>o});var i=a(30758),s=a(21974),n=a(93492),r=a(86070);const o=(0,i.memo)((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:i,size:o="small",className:l}){const c=e?n.Ru.get("following"):n.Ru.get("follow");return(0,r.jsx)(s.n,{onClick:t,disabled:a,size:o,className:l,children:i||c})}))},95321:(e,t,a)=>{a.d(t,{h:()=>u});var i=a(30758),s=a(81899),n=a(41179),r=a(60841),o=a(13753),l=a(18308);var c=a(9875),d=a(86070);const u=({children:e,action:t,uri:a})=>{const u=(0,r.V)(),m=(0,l.N)(o.JD);let h;const p=()=>{const e={triggerId:n.d,triggerAction:{type:t}};s.h.set((t=>({...t,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[a]})};try{h=i.Children.only(e)}catch(t){return(0,d.jsx)(d.Fragment,{children:e})}return u?i.cloneElement(h,{onClick:p}):(0,d.jsx)(d.Fragment,{children:e})}},1328:(e,t,a)=>{a.d(t,{H4:()=>i});a(30758),a(97500),a(93492),a(92197),a(60703);a(86070);let i=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({})},53185:(e,t,a)=>{a.d(t,{D:()=>o});var i=a(30758),s=a(30047),n=a(56116),r=a(86070);const o=i.memo((function({uri:e,ariaPlayLabel:t,ariaPauseLabel:a,onClick:i,isPlaying:o,size:l,locked:c,...d}){const u=(0,n.W)();return(0,r.jsx)(s.R,{ariaPlayLabel:t,ariaPauseLabel:a,isPlaying:o,onClick:t=>{c||u({targetUri:e,intent:o?"pause":"play",type:"click",itemIdSuffix:"button"}),i(t)},size:l,locked:c,...d})}))},99557:(e,t,a)=>{a.d(t,{v:()=>m});var i=a(21974),s=a(30320),n=a(555),r=a(70257),o=a(93492),l=a(95321),c=a(28552),d=a(3910),u=a(86070);const m=({uri:e,isBook:t=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:h}=(0,c.w)({uri:e,isBook:t});return a?(0,u.jsx)(i.n,{onClick:h,iconTrailing:s.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(n.$,{disabled:void 0===a,onClick:m,iconTrailing:r.P,children:o.Ru.get("web-player.prerelease.presave")})})}},28525:(e,t,a)=>{a.d(t,{g:()=>A});var i=a(30758),s=a(3074),n=a.n(s),r=a(88783),o=a(18376),l=a(13505),c=a(3118),d=a(72240),u=a(585),m=a(40400),h=a(11203),p=a(55669),g=a(4317),x=a(56695),y=a(33279),v=a(93492),b=a(44183),j=a(81493),f=a(86070);const C=({onSelect:e})=>{const{viewMode:t,setViewMode:a}=(0,b.a)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.y,{children:v.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),j.i.map((({value:i,icon:s,text:n},r)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":t===i,divider:r===j.i.length-1?"after":void 0,autoClose:!1,leadingIcon:s(),onClick:()=>{a(i),e?.(i)},children:n()},i)))]})},w=({heading:e,selected:t,onSelect:a,options:i,enableViewModeMenu:s=!1,onSelectViewMode:n,sortOrder:r,...o})=>{let l;r&&(r===y.H.ASC||r===y.H.SECONDARY_ASC?l=m.U:r!==y.H.DESC&&r!==y.H.SECONDARY_DESC||(l=h.R));return(0,f.jsxs)(p.W,{getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),...o,children:[e?(0,f.jsx)(g.y,{children:e}):null,i.map((({key:e,value:i},s)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":e===t.key,CheckedIcon:l,onClick:()=>a(e,s),children:i},e))),s&&(0,f.jsx)(C,{onSelect:n})]})};var k=a(86422),S=a(82362),P=a(64640);const R="x-sortBox-sortDropdown",I="cvTLPmjt6T7M85EKcB8w",E="SbDHY3fVADNJ4l9qOLQ2",N=({isOpen:e,className:t})=>e?(0,f.jsx)(r.J,{size:"small","aria-hidden":"true",className:t}):(0,f.jsx)(o.y,{size:"small","aria-hidden":"true",className:t}),A=({heading:e,options:t,selected:a,onSelect:s,sortOrder:r,variant:o="bodySmall",semanticColor:m,disabled:h,onClick:p,ariaLabel:g,enableViewModeMenu:x=!1})=>{const y=(0,c.NC)(P.mA)&&x,{viewMode:v}=(0,k.a)();a||(a=t?.[0]);const b=j.i.find((({value:e})=>e===v))||j.i[0],C=(0,i.useMemo)((()=>`sortboxlist-${n().create().hex}`),[]),{spec:A,logger:T}=(0,S.r)(d.d,{});return(0,f.jsx)(u.b,{menu:(0,f.jsx)(w,{selected:a,options:t,onSelect:(e,t)=>{s(e,t);const a=A.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();T.logInteraction(a)},sortOrder:r,heading:e,enableViewModeMenu:y,onSelectViewMode:e=>{const t=A.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();T.logInteraction(t)},id:C}),children:(e,t,i)=>(0,f.jsxs)("button",{className:R,onClick:e=>{h||(p?.(e),t(e))},ref:i,type:"button","aria-label":g,role:"combobox","aria-controls":C,"aria-expanded":e,children:[(0,f.jsx)(l.E,{"data-sortbox-label":!0,semanticColor:m,variant:o,className:I,children:a?.value||(y?b.text():"")}),y?b.icon():(0,f.jsx)(N,{isOpen:e,className:E})]})})}},90981:(e,t,a)=>{a.d(t,{N:()=>p});var i=a(97500),s=a.n(i),n=a(30758),r=a(45143),o=a(5119);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",d="w4ZoklZWkrsyrVA34vI8";var u=a(86070);const m=({title:e,uri:t,className:a,onClick:i,position:l})=>{const m=(0,n.useCallback)((e=>{i?.(e,{uri:t,position:l})}),[i,l,t]);return(0,u.jsx)(o.N,{"aria-label":e,className:s()(c,d,a),to:t,onClick:m,children:(0,u.jsx)(r.v,{as:"span",children:e})})};function h(e){return!!e.uri&&!!e.title}const p=({topics:e,className:t,onClick:a})=>(0,u.jsx)("div",{className:s()(l,t),children:e.filter(h).map(((e,t)=>{const i=`${e.uri}-${t}`;return(0,u.jsx)(m,{title:e.title,uri:e.uri,position:t,onClick:a},i)}))})},58639:(e,t,a)=>{a.d(t,{B:()=>I,q:()=>N});var i=a(30758),s=a(62411),n=a(33746),r=a(72574),o=a(67244),l=a(88147),c=a(12367),d=a(92734),u=a(66327),m=a(81899),h=a(70346),p=a(34863),g=a(33025),x=a(64212),y=a(60841),v=a(95059),b=a(72755),j=a(24395),f=a(33059),C=a(71850),w=a(39876),k=a(82362),S=a(88176),P=a(89979),R=a(86070);function I(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const E=e=>`activation-trigger-mme-${e}`,N=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:N,status:A,variant:T}){const B=(0,v.c)(),M=a.playedState.playPositionMilliseconds,_=a.uri,L=(0,i.useRef)(null),D=(0,g.N)(t.uri),[F,U]=(0,i.useState)(a.playedState.state===S._w.Completed),{draggable:O,onDragStart:z}=(0,x.P)(),H=(0,y.V)(),V=(0,f.y)(),q=(0,s.wA)(),{UBIFragment:W,spec:G,logger:K}=(0,k.r)(n.d,{data:{uri:_,reason:a.requestId||"",position:e}}),Y=(0,w.t)(G),{isActive:$,isPlaying:X,togglePlay:Z}=N({uri:_}),[Q]=(0,C.S)(1e4,(e=>e?.item?.uri===_));(0,i.useEffect)((()=>{X&&(L.current=Q)}),[X,Q]),(0,i.useEffect)((()=>{!X&&L.current&&a.duration.milliseconds<=L.current&&U(!0)}),[X,a.duration.milliseconds]);const J=(0,i.useCallback)((e=>{e||(L.current=0),U(e)}),[]),ee=I(t),te=(0,b.C)({...a,coverArt:{sources:a.coverArt}},ee),ae=(0,i.useCallback)((()=>{if(a.episodeType===S.I_.Episode&&B)m.h.set((()=>({triggerId:E(a.uri),triggerAction:null})));else if(H)te();else{let e;e=X?G.playButtonFactory().hitPause({itemToBePaused:_}):$?G.playButtonFactory().hitResume({itemToBeResumed:_}):G.playButtonFactory().hitPlay({itemToBePlayed:_});const t=K.logInteraction(e);Z({loggingParams:t})}}),[$,te,Z,_,X,H,a,B,K,G]),ie=(0,i.useCallback)((()=>{K.logInteraction(G.hitUiNavigate({destination:_}))}),[_,K,G]),se=a.podcastSubscription?.isPaywalled??!1,ne=a.podcastSubscription?.isUserSubscribed??!1,re=se&&!ne,oe=se&&H,{badges:le}=(0,P.b)({contentRating:a.contentRating?.label,isPaywalled:se}),ce=(0,i.useCallback)((()=>q((0,o.Tf)(t.uri))),[t.uri,q]),de=(0,i.useCallback)((e=>{let i=e;return(re||oe)&&(i=(0,R.jsx)(h.N,{enabled:!0,showUri:a.podcast?.uri||t.uri,renderInline:!1,children:i})),!a.playability.playable&&le.nineteen&&(i=(0,R.jsx)("div",{onClick:e=>{e.stopPropagation(),ce()},children:e})),i=(0,R.jsx)(l.k,{id:E(_),targetURI:(0,r.o_h)(_),children:i}),i}),[_,re,oe,t.uri,le.nineteen,a.playability.playable,ce,a.podcast?.uri]);return(0,R.jsx)(W,{spec:G,children:(0,R.jsx)(j.pZ,{value:"row",index:e,children:(0,R.jsx)(c.h,{onShow:()=>{K.logInteraction(G.secondaryHitUiReveal())},menu:(0,R.jsx)(d.b,{uri:_,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:F,onMarkAsPlayed:J}),children:(0,R.jsx)(u.k,{ref:Y,requestId:a.requestId,index:e,uri:_,size:V,images:a.coverArt||[],name:a.name,showName:a.podcast?.name||t.name,description:a.description,isPlayable:a.playability.playable||re,fullyPlayed:F,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate,resumePositionMs:L.current??M,draggable:O,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} • ${t.name}`;z(e,{itemUris:[_],dragLabelText:i,contextUri:t.uri})},handlePlaybackClick:ae,handleClick:ie,isCurrentlyPlaying:$,isPaywalled:se,isUserSubscribed:ne,isCourseLesson:D,isPlaying:X,position:X?Q:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:J,contentInformation:a.contentInformation,showUri:a.podcast?.uri||t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,R.jsx)(p.P,{episode:a}),playButtonWrapper:de,onMoreButtonClick:()=>{K.logInteraction(G.moreButtonFactory().hitUiReveal())},status:A,variant:T})})})})}))},81493:(e,t,a)=>{a.d(t,{i:()=>c,p:()=>l});var i=a(3987),s=a(18317),n=a(93492),r=a(74598),o=a(86070);const l=[r.I.COMPACT,r.I.LIST],c=[{value:r.I.COMPACT,text:()=>n.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"),icon:()=>(0,o.jsx)(i.d,{size:"small"})},{value:r.I.LIST,text:()=>n.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),icon:()=>(0,o.jsx)(s.N,{size:"small"})}]},57891:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(87732);const s="rTMkDBDp47Eo12ZEQv4U";var n=a(86070);const r=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{if(e.untyped)return(0,n.jsx)(i.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},t);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let s;return s="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,n.jsx)(i.Z,{as:"p",variant:"finale",dir:"auto",children:`${s} ${a}`},t)}));return t&&a.unshift((0,n.jsx)(i.Z,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,n.jsx)("div",{className:s,children:a})}},91621:(e,t,a)=>{a.d(t,{_:()=>d});var i=a(30758),s=a(75773),n=a(97500),r=a.n(n);const o="eqw9lvuoZHrkWMTdyTpY",l="lb08f71wES9AQnKx6e0R";var c=a(86070);const d=(0,i.memo)((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:a,showScrollbar:n=!0,horizontalScroll:d=!1,className:u}=e,{ref:m,inView:h}=(0,s.Wx)({initialInView:t});return(0,i.useLayoutEffect)((()=>{h&&a&&a()}),[h,a]),(0,c.jsxs)("div",{className:r()({[l]:!n,[o]:d},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,c.jsx)("div",{ref:m})]})}))},40841:(e,t,a)=>{function i(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}a.d(t,{u:()=>i})},76332:(e,t,a)=>{a.d(t,{v:()=>r});var i=a(44947),s=a(49810);const n=new i.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),r=(e,t)=>(0,s.I)(n,e,t)},48512:(e,t,a)=>{a.d(t,{K:()=>i});const i=e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Podcast"===e.__typename;var t}},28552:(e,t,a)=>{a.d(t,{w:()=>d});var i=a(30758),s=a(75690),n=a(93492),r=a(71338),o=a(49889),l=a(98866),c=a(82362);const d=({uri:e,isBook:t})=>{const{add:a,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,r.d)(),{spec:h,logger:p}=(0,c.r)(s.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,i.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(t?n.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):n.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,t,p,h,e]),removePresave:(0,i.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[p,d,h,e])}}},56454:(e,t,a)=>{a.d(t,{v:()=>r});var i=a(71086),s=a(23046),n=a(75784);function r(e){if("string"==typeof e)return(0,i.g)(e);const t=e;return(0,n.v)(t)||(0,s.p)(t)}},71752:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ki});var i=a(30758),s=a(85387),n=a(83623),r=a(27428),o=a(72574),l=a(93492),c=a(64359),d=a(8030),u=a(97500),m=a.n(u),h=a(62411),p=a(13505),g=a(3118),x=a(322),y=a(40288),v=a(12032),b=a(79202),j=a(585),f=a(36019),C=a(90981),w=a(87732),k=a(1328),S=a(30047),P=a(68320),R=a(3568),I=a(55117),E=a(75189),N=a(43671),A=a(67391),T=a(78172),B=a(89979);const M="Bns6t3CfzQaCA4DLRzPQ",_="zGFcpmwFVhJxRDXUXoXA",L="_FLyhB96W9W0msGYNWUl",D="Si5iVyGLDY7mGWH_U2wA",F="HLBtD6mJyIB9EeOzDtXE",U="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",H="bu7LVUNyDPF_FcrKMv74",V="bYP2npsc_CeChpMGcr6g",q="Ux7aVnDYlwojS4AmkSLg";var W=a(86070);let G=function(e){return e.SMALL="small",e.LARGE="large",e}({});const K=({images:e,title:t,contentRating:a,duration:i,moreButton:s,onClick:n,onContextMenu:r,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:h,label:p,isPlayable:g=!0})=>{const x=u===G.LARGE?"medium":"small",{badges:y}=(0,B.b)({contentRating:a});return(0,W.jsxs)("div",{"data-testid":"trailer-component",className:m()(M,h,{[_]:d}),onContextMenu:r,onTouchStart:o,onTouchEnd:l,children:[(0,W.jsxs)("div",{className:D,children:[(0,W.jsxs)("div",{className:z,children:[(0,W.jsx)(I.b,{type:T.c.EPISODE,title:t,className:m()(O,{[q]:u===G.SMALL,[V]:u===G.LARGE}),size:E.Qe.SIZE_56,images:e,shape:I.u.ROUNDED_CORNERS}),(0,W.jsx)("div",{className:H,children:(0,W.jsx)(S.R,{"data-testid":"trailer-play-button",version:k.H4.transparent,size:x,isPlaying:c,onClick:n,disabled:!g})})]}),(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:F,children:(0,W.jsx)(w.Z,{dir:"auto",className:L,variant:"balladBold",children:t})}),(0,W.jsxs)("div",{className:U,children:[(0,W.jsx)(P.E,{text:p}),y.explicit&&(0,W.jsx)(R.U,{}),y.nineteen&&(0,W.jsx)(N.q,{}),(0,W.jsx)(w.Z,{dir:"auto",variant:"mesto",children:(0,W.jsx)(A.d,{durationMs:i})})]})]})]}),s]})};var Y=a(98664),$=a(99802);const X=({htmlDescription:e,narrators:t,spec:a,isPreRelease:s})=>{const n=(0,$.s)(),r=(0,i.useCallback)((e=>{const t=a.seeMoreButtonFactory();n.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[n,a]);return(0,W.jsxs)(W.Fragment,{children:[t.length?(0,W.jsx)(p.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",t.join(l.Ru.getSeparator()))}):null,e&&(0,W.jsx)(Y.N,{maxLines:4,content:e,htmlContent:e,onExpanded:r,isOpen:s||null})]})};var Z=a(35251),Q=a(42297),J=a(85277),ee=a(39782),te=a(61407),ae=a(5928),ie=a(9830),se=a(89255),ne=a(5797),re=a(52403);const oe="myIGgR3zdb9nFuJ1pXYl",le="e74TmRHu_W1yZHspTBmR",ce="rrcjfInomKt1lXRDRdR8",de="Wj9mxFJDtPdiMcUtS1te",ue="SCwESjClY3m_9JlV2L7S",me="Yoa_yG2jhELT4w9wJpHf",he="xsw253oiwmIAafVfjl1J",pe="JPqnsg5dgBTzsEoClLmD",ge="bhuRgaz03VXMf0mOG3Q2",xe="GP_qgmZlmL0CJ9r22AD9",ye="bilV2VquzmEnhV4d97Tc",ve="caqddwmUJf4ix6GI84NX",be=({explicit:e,durationMs:t,publishDate:a,preReleaseEndDateTime:i,isPreRelease:s,uri:n,isPlaying:r})=>{const o=(0,ne.p)(n),{isMarkedAsFinished:c}=(0,se.z)(n);let d;return s&&i?d=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(i)}):!s&&a&&(d=l.Ru.formatDate(a)),(0,W.jsxs)("div",{className:ge,children:[e&&(0,W.jsx)(R.U,{className:ve}),(0,W.jsxs)("div",{className:xe,children:[d&&(0,W.jsx)(p.E,{variant:"bodySmall",className:ye,children:d}),t?(0,W.jsxs)(W.Fragment,{children:[o?.playPositionMilliseconds?(0,W.jsx)(p.E,{variant:"bodySmall",className:ye,children:(0,W.jsx)(A.d,{durationMs:t})}):null,(0,W.jsx)(re.j,{isPlaying:r,fullyPlayed:c,durationMs:t,position:o?.playPositionMilliseconds})]}):null]})]})};var je=a(555),fe=a(99557);const Ce=(0,i.createContext)(null),we=({children:e,isPreRelease:t})=>{const[a,s]=(0,i.useState)(!t),n=(0,i.useMemo)((()=>({isPreRelease:t,isCountdownFinished:a,setCountdownFinished:()=>s(!0)})),[t,a,s]);return(0,W.jsx)(Ce.Provider,{value:n,children:e})};function ke(){const e=(0,i.useContext)(Ce);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var Se=a(16228);const Pe="nz8Wc80RAtdAb3yU9FxM",Re=({uri:e})=>{const{isCountdownFinished:t}=ke(),{invalidateCache:a}=(0,Se.W)(e);return(0,W.jsx)("div",{className:Pe,children:t?(0,W.jsx)(je.$,{onClick:a,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,W.jsx)(fe.v,{uri:e,isBook:!0})})};var Ie=a(53185),Ee=a(40638),Ne=a(71338),Ae=a(60841),Te=a(78602);const Be="NQAShVY0o7RQ2bCTDSkw";function Me({uri:e,price:t,size:a,spec:i,logger:s,onPlayback:n}){const{enqueueSnackbar:r}=(0,Ne.d)(),o=(0,Ae.V)(),c=0===t?.finalPrice?.amount,d=c?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),u=(0,Ee.YQ)((async()=>{if(s.logInteraction(d.hitShowPaywall({paywalledItem:e})),o)n();else{try{t?.finalPrice?await(0,Te.S)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):r(l.Ru.get("error.generic"))}catch(e){r(l.Ru.get("error.generic"))}n()}}),2e3,{leading:!0,trailing:!1});return(0,W.jsx)(je.$,{size:a,className:Be,style:{flexShrink:0},onClick:u,children:c?l.Ru.get("web-player.audiobooks.buyFree"):l.Ru.get("web-player.audiobooks.buy")})}const _e=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:s,onPlayback:n,logger:r,spec:o,size:l="large"})=>t&&!s?(0,W.jsx)(Me,{size:l,uri:e,price:a,logger:r,spec:o,onPlayback:n}):(0,W.jsx)(Ie.D,{size:l,isPlaying:i,uri:e,onClick:n});var Le=a(69623),De=a(96437),Fe=a(48975),Ue=a(67759),Oe=a(45176),ze=a(82362);const He="8px",Ve=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:s,togglePlay:n,isLocked:r,isSaved:o,consumptionCapExplanation:c,price:d,spec:u,isExplicit:m,publishDate:p,preReleaseEndDateTime:g,duration:x}){const[y,f]=(0,Ue.A)(t,o),C=!(0,Fe.n)(),{isPreRelease:w}=ke(),k=(0,h.wA)(),S=(0,$.s)(),P=(0,Le.d$)(),{spec:R,logger:I}=(0,ze.r)(Z.e,{data:{uri:t}});(0,i.useEffect)((()=>{P&&I.logImpression(R.impression())}),[P,I,R]);const E=(0,i.useCallback)((()=>{const e=u.saveToLibraryButtonFactory();y?S.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):(S.logInteraction(e.hitFollow({itemToBeFollowed:t})),P&&I.logInteraction(R.hitFollow({itemToBeFollowed:t}))),f(!y)}),[t,y,u,f,S,P,I,R]),N=(0,i.useCallback)(((e,a)=>{const i=u.downloadButtonFactory();c?k((0,v._3)(c)):a===Oe.NV.ADD?S.logInteraction(i.hitDownload({itemToDownload:t})):a===Oe.NV.REMOVE?S.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===Oe.NV.NO_PERMISSION&&S.logInteraction(i.hitUiReveal())}),[c,k,S,u,t]),A=(0,i.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();S.logInteraction(e)}),[S,u]),T=(0,De.j)(),B=!!c,M=!r&&!B;return(0,W.jsxs)(Q.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":He},children:[(0,W.jsx)(J.S,{testId:"book-action-bar-metadata",children:(0,W.jsx)(be,{explicit:m,publishDate:p,preReleaseEndDateTime:g,durationMs:x,isPreRelease:w,uri:t,isPlaying:s})}),(0,W.jsxs)(J.S,{children:[w&&(0,W.jsx)(Re,{uri:t}),!w&&(0,W.jsx)(_e,{uri:t,isLocked:r,isConsumptionCapped:B,price:d,isPlaying:s,onPlayback:n,logger:S,spec:u,size:T}),!w&&(0,W.jsx)(ie.e,{children:(0,W.jsx)(ee.M,{isAdded:y,onClick:E,disabled:C,size:T,condensed:!0})},"follow-button"),(0,W.jsx)(te.I,{uri:t,onClick:N,size:T,canDownload:M}),(0,W.jsx)(j.b,{menu:(0,W.jsx)(ae.p,{uri:t,isPreRelease:w}),children:(0,W.jsx)(b.e,{label:l.Ru.get("more.label.context",a),onClick:A,size:T})})]})]})}));var qe=a(60749),We=a(12367),Ge=a(18340),Ke=a(20256),Ye=a(94201),$e=a(3996),Xe=a(4378),Ze=a(11951),Qe=a(49022),Je=a(44746),et=a(37299),tt=a(97402),at=a(26101),it=a(46710),st=a(2898),nt=a(32109),rt=a(44662);var ot=a(20951),lt=a(33059);const ct="BBK_i9SHovXTLVjas0kc",dt=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:s,isPlaying:n,togglePlay:r,isLocked:c,price:d,isConsumptionCapped:u,logger:m,spec:h,preReleaseEndDateTime:g}){const x=(0,lt.y)(),y=x===ot.E.SMALL||x===ot.E.XSMALL,{isPreRelease:v,setCountdownFinished:b}=ke(),j=v&&y,f=(0,W.jsx)(ae.p,{uri:i}),C=function(e){const t=(0,rt.t)();return(0,it.I)({queryKey:["show-author-uri",e],queryFn:async()=>t.fetch([e],[nt.UH.IDENTITY_TRAIT]).then((([{extensions:{[nt.UH.IDENTITY_TRAIT]:e}}])=>e?.contributors.at(0)?.uri?.match(/^spotify:author:[0-9a-zA-Z]{22}$/)?.[0]??null)),staleTime:36e5,gcTime:72e5,enabled:(0,st.H)()}).data??null}(i),w=(0,o.o_h)(C,{parseUnknown:!0})?.toURLPath(!0),k=w?(0,W.jsx)(qe.N_,{to:w,children:a}):a;return(0,W.jsxs)(Ye.z,{backgroundColor:s,size:v?Ye.K.XLARGE:Ye.K.DEFAULT,children:[(0,W.jsxs)(Ze.h,{children:[v&&(0,W.jsx)(Re,{uri:i}),!v&&(0,W.jsx)(_e,{uri:i,isLocked:c,price:d,isPlaying:n,isConsumptionCapped:u,onPlayback:r,logger:m,spec:h,size:"medium"}),(0,W.jsx)(We.h,{menu:f,children:(0,W.jsx)(Qe.X,{text:t,dragUri:i,dragLabel:t})})]}),!j&&(0,W.jsx)(We.h,{menu:f,children:(0,W.jsx)($e.K,{images:e,name:t,dragUri:i,dragMimeType:Ke.fl.AUDIOBOOKS,shape:I.u.SQUARE})}),(0,W.jsxs)(Xe.Y,{children:[(0,W.jsx)(et.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,W.jsx)(We.h,{menu:f,children:(0,W.jsx)(at.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:at.tw,dragUri:i,dragMimeType:Ke.fl.AUDIOBOOKS,dragLabel:t,children:t})}),v?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Je.X,{children:(0,W.jsx)(p.E,{className:ct,variant:"bodySmallBold","data-testid":"entityAuthor",children:k})}),g&&(0,W.jsx)(Ge.G,{targetDate:g,images:j?e:[],imageTitle:t,onComplete:b})]}):(0,W.jsx)(tt.g,{children:k})]})]})})),ut="pwjwUMaZVoJ0wBcQlIDf",mt=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,W.jsxs)("div",{className:ut,children:[(0,W.jsx)(p.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,W.jsx)(p.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,W.jsxs)("div",{className:ut,children:[(0,W.jsx)(p.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,W.jsx)(p.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,W.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var ht=a(55158),pt=a(12431),gt=a(80352),xt=a(46106),yt=a(34668),vt=a(16203);const bt="XzRW0BrBLoXKWET5f8m4",jt="ooqITYCPJKua4e5yv8_9",ft="zN8lTnSnAUSRAMPb7XYV",Ct="llVyicNXe8z0QAnoRur1",wt="fCrjgF2UgDUWjtqWls4Q",kt="CLnKy_BRVtIluLfBWy5t",St="RZa0qnXymlZCoGOdE03d",Pt="RFXE57hUzWvvK4_7GX13",Rt="ALQqkJiR2lZOSYvhHesh",It="BQwrI2BbKK4n451iu2QC",Et="VYLq_YaQVNISHPQOu2af",Nt=i.memo((function({name:e,duration:t,uri:a,bookName:s,usePlayContextItem:n,isChapterLocked:r,isPlayable:o,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:b}){const C=(0,i.useRef)(c),{isPlaying:w,togglePlay:k,isActive:P}=n({uri:a}),I=(0,$.s)(),E=(0,h.wA)(),T=(0,yt.o)((e=>{if(e?.item?.uri===a){const t=(0,vt.s)(e)??0;return C.current=t,t}return 0})),B=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),M=(0,i.useCallback)((e=>{if(B(e),b)return void E((0,v._3)(b));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(r)I.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,xt.$I)({isPlaying:w,isActive:P,spec:t,logger:I,uri:a});k({loggingParams:e})}}),[b,E,y,P,r,w,I,x,B,k,a]),_=(0,i.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();I.logInteraction(e)}),[y,I,x,a]),L=(0,i.useCallback)((e=>{B(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();I.logInteraction(t)}),[y,I,x,B,a]),D=!(r||b),F=(0,W.jsx)(ht.d,{className:m()({[jt]:P}),children:e}),U=(0,W.jsxs)("div",{className:kt,children:[u&&(0,W.jsx)(R.U,{fullText:!0}),g&&(0,W.jsx)(N.q,{size:16}),(0,W.jsxs)("div",{className:St,children:[C.current?(0,W.jsx)(p.E,{variant:"bodySmall",className:Et,children:(0,W.jsx)(A.d,{durationMs:t.milliseconds})}):null,(0,W.jsx)(re.j,{isPlaying:w,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:C.current,position:w?T:void 0})]})]}),O=(0,W.jsxs)("div",{className:Rt,children:[(0,W.jsx)("div",{className:It,children:D?(0,W.jsx)(j.b,{menu:(0,W.jsx)(f.r,{uri:a}),children:(0,W.jsx)(gt.e,{className:wt,size:gt.M.xs,label:l.Ru.get("more.label.context",e),onClick:L})}):null}),(0,W.jsx)("div",{className:Pt,children:(0,W.jsx)(S.R,{size:"small",version:S.H.secondary,onClick:M,isPlaying:w,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",e,s),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",e,s),locked:r&&!b,disabled:!o&&!(r||b)})})]}),z=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("hr",{className:ft,"aria-hidden":!0}),(0,W.jsx)(pt.v,{id:`chapter-${y}`,title:F,body:U,footer:O,onDoubleClick:e=>{M(e)},className:bt})]});return D?(0,W.jsx)(We.h,{menu:(0,W.jsx)(f.r,{uri:a}),onShow:_,children:(0,W.jsx)("div",{className:Ct,children:z})}):(0,W.jsx)("div",{className:Ct,children:z})}));var At=a(91621),Tt=a(43953);var Bt=a(27506);const Mt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:s,usePlayContextItem:n,spec:r,consumptionCapExplanation:o})=>{const l=function(e,t){const a=(0,Tt.T)();return(0,i.useCallback)((async(i,s)=>a.getBookContents(e,{offset:i,limit:s,doRefreshSubscription:t})),[t,a,e])}(e,s),c=(0,i.useRef)(!1),d=(0,i.useRef)(0),{isMarkedAsFinished:u}=(0,se.z)(e),[m,h]=(0,i.useState)([]),p=(0,i.useCallback)((e=>e?.uri===a),[a]),g=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!p(e)),[p]),x=(0,i.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&h((t=>t.concat(e.items.filter(g))))}))))}),[l,g]);return(0,i.useEffect)((()=>{d.current=0,h([])}),[e]),(0,W.jsx)("ul",{children:(0,W.jsx)(At._,{onReachBottom:x,triggerOnInitialLoad:!0,children:m.map(((e,a)=>{const{name:i,duration:s,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:m},isExplicit:h,is19PlusOnly:p}=e,g=m===Bt._w.Completed||u,x=function(e){return!e.playability?.playable&&(e.playability?.reason===Bt.Uk.PaymentRequired||e.playability?.reason===Bt.Uk.Anonymous)}(e);return(0,W.jsx)(Nt,{name:i,duration:s,uri:l,bookName:t,usePlayContextItem:n,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:o,resumePositionMs:d,isFullyPlayed:g,isExplicit:h,is19PlusOnly:p,spec:r,index:a},l)}))})})};var _t=a(61895),Lt=a(46726),Dt=a(90630),Ft=a(57891),Ut=a(57977),Ot=a(98674);const zt="_yl4tOZxcpoUt28k6B8I",Ht="lcJflizNrSwDM9yPNk6h",Vt="ret7iHkCxcJvsZU14oPY",qt=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,W.jsxs)("button",{className:m()(zt,t),onClick:a,children:[(0,W.jsx)(w.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),i?(0,W.jsx)(Ut.j,{iconSize:16,className:m()(Ht)}):(0,W.jsx)(Ot.a,{iconSize:16,className:m()(Ht)}),e.averageRating?.showAverage&&(0,W.jsxs)(w.Z,{variant:"mesto",className:m()(Vt),children:["(",l.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var Wt=a(38557),Gt=a(46307),Kt=a(24312),Yt=a(17807);const $t={shuffle:!1,repeat:Kt.p.REPEAT_NONE},Xt=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:n,htmlDescriptionPlain:o,authorName:d,sample:u,narrators:w,rating:k,isExplicit:S,duration:P,copyrights:R,publishDate:I,price:E,isLocked:N,isSaved:A,consumptionCapExplanation:B,signifierText:M,resumeEpisodeLink:_,topics:L,isPreRelease:D,preReleaseEndDateTime:F}=e,{search:U}=(0,s.zy)(),O=!!new URLSearchParams(U).get("isUnlockingAudiobook"),z=!(!(0,Wt.Z)(O)||O),H=(0,Ae.V)(),V=(0,Lt.H)(a[0]?.url),q=(0,h.wA)(),Y=(0,g.NC)(Dt.NzS,{loadingValue:!1}),{spec:$,logger:Z}=(0,ze.r)(x.U,{data:{uri:t,identifier:r.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:Q,logger:J}=(0,ze.r)(x.U,{data:{uri:t,identifier:r.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ee,logger:te}=(0,ze.r)(y.Y,{data:{uri:t,identifier:r.$h.PODCAST_SHOW_AUDIOBOOK}}),ae=(0,i.useMemo)((()=>$.actionBarFactory()),[$]),ie=(0,i.useMemo)((()=>Q.aboutSectionFactory()),[Q]),se=(0,i.useMemo)((()=>$.chapterListFactory()),[$]);(0,i.useEffect)((()=>{N&&te.logImpression(ee.impression())}),[ee,te,N]);const{isPlaying:ne,togglePlay:re,usePlayContextItem:ge,isActive:xe,triggerPlay:ye}=(0,Gt.P)({uri:t},{featureIdentifier:"audiobook"},$t),{togglePlay:ve,isPlaying:be,isActive:je}=(0,Gt.P)({uri:u?.uri??"",pages:[{items:[{uri:u?.uri??"",uid:u?.uri??"",type:T.c.CHAPTER,provider:null,metadata:D?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},$t),fe=ne&&!be,Ce=xe&&!je,ke=(0,i.useCallback)((async()=>{const e=$.actionBarFactory().playButtonFactory();if(B)return Z.logInteraction(e.hitShowPaywall({paywalledItem:t})),void q((0,v._3)(B));if(!N||H)if(H)re();else{const a=(0,xt.$I)({isPlaying:fe,isActive:Ce,spec:e,logger:Z,uri:t});Ce?re({loggingParams:a}):ye({skipTo:_?{uri:_}:void 0,loggingParams:a})}}),[$,B,H,N,Z,t,q,re,fe,Ce,ye,_]),Se=(0,i.useCallback)((()=>{u?.uri&&ve()}),[ve,u?.uri]),Pe=(0,i.useCallback)((()=>{const a=ie.ratingButtonFactory().hitUiReveal();J.logInteraction(a),q((0,v.eH)(t,e))}),[ie,q,e,J,t]),Re=(0,lt.y)(),Ie=N&&!B&&E;return(0,W.jsx)("section",{className:oe,children:(0,W.jsxs)(we,{isPreRelease:D,children:[(0,W.jsx)(c.Q,{children:(0,Yt.hV)({showOrAudiobookName:n,type:"Audiobook"})}),(0,W.jsx)(_t.c,{artistOrShow:d,title:n,uri:t,entityType:_t.p.AUDIOBOOK}),(0,W.jsx)(dt,{name:n,authorName:d,uri:t,coverArt:a,backgroundColor:V,togglePlay:ke,isPlaying:fe,isLocked:N,isConsumptionCapped:!!B,price:E,logger:Z,spec:$.actionBarFactory(),preReleaseEndDateTime:F}),(0,W.jsx)(Ve,{name:n,backgroundColor:V,uri:t,togglePlay:ke,isPlaying:fe,isLocked:N,isSaved:A,consumptionCapExplanation:B,isExplicit:S,duration:P,publishDate:I,preReleaseEndDateTime:F,price:E,spec:ae}),(0,W.jsxs)("div",{className:m()(le,"contentSpacing",{[ce]:Re===ot.E.LARGE}),children:[(0,W.jsxs)("div",{className:de,children:[(0,W.jsxs)("div",{className:pe,children:[M&&(0,W.jsx)(p.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:M}),!M&&Ie&&(0,W.jsx)(mt,{price:E})]}),(0,W.jsx)(X,{htmlDescription:o,narrators:w,spec:ie,isPreRelease:D??!1})]}),(0,W.jsxs)("div",{className:ue,children:[u?.isPlayable&&(0,W.jsx)(K,{label:l.Ru.get("audiobook.page.sample"),images:u.coverArt,title:u.name,duration:u.duration.milliseconds,moreButton:N?null:(0,W.jsx)(j.b,{menu:(0,W.jsx)(f.r,{uri:u.uri}),children:(0,W.jsx)(b.e,{})}),onClick:Se,isPlaying:be,isActive:je,size:G.LARGE,contentRating:u.contentRating?.label,isPlayable:u.isPlayable}),!D&&(0,W.jsx)("div",{className:me,children:(0,W.jsx)(qt,{rating:k,onClick:Pe})}),L.length>0&&(0,W.jsx)(C.N,{topics:L})]}),(0,W.jsxs)("div",{className:he,children:[!D&&(0,W.jsx)(Mt,{bookUri:t,bookName:n,sampleUri:u?.uri,isFinishedUnlockingJourney:z,usePlayContextItem:ge,spec:se,consumptionCapExplanation:B},`${t}-${N}-${!!B}`),Y&&(0,W.jsx)(Ft.Z,{copyrights:R})]})]})]})})}));var Zt=a(4937),Qt=a(39550),Jt=a(21017);const ea=({uri:e,name:t,isSaved:a,backgroundColor:s,spec:n})=>{const r=(0,$.s)(),o=!(0,Fe.n)(),[c,d]=(0,Ue.A)(e,a),u=(0,Le.d$)(),{spec:m,logger:h}=(0,ze.r)(Z.e,{data:{uri:e}});(0,i.useEffect)((()=>{u&&h.logImpression(m.impression())}),[u,h,m]);const p=(0,i.useCallback)((()=>{const t=n.followButtonFactory();r.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),!c&&u&&h.logInteraction(m.hitFollow({itemToBeFollowed:e})),d(!c)}),[e,c,n,r,d,u,h,m]),g=(0,i.useCallback)((()=>{r.logInteraction(n.contextButtonFactory().hitUiReveal())}),[r,n]),x=(0,De.j)();return(0,W.jsx)(Q.E,{backgroundColor:s,children:(0,W.jsxs)(J.S,{children:[(0,W.jsx)(ie.e,{children:(0,W.jsx)(Jt.W,{isFollowing:c,onClick:p,disabled:o})},"follow-button"),(0,W.jsx)(j.b,{menu:(0,W.jsx)(Qt.H,{uri:e}),onShow:g,children:(0,W.jsx)(b.e,{label:l.Ru.get("more.label.context",t),size:x})})]})})};var ta=a(87150),aa=a(45975),ia=a(50154),sa=a(56895),na=a(34423),ra=a(85126),oa=a(11484),la=a(5119),ca=a(26906);const da="BknvXMyUnN3fQCz8mvLI",ua="slMInsl3HL9_02zHT22R",ma="40px",ha=({leavebehinds:e})=>{let t;return 1===e.length&&(t=(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(t=l.Ru.get("podcast-ads.recent_ads_just_two",(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(t=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,W.jsxs)(p.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),t]})},pa=({leavebehinds:e,uri:t,surface:a})=>{const s=(0,ca.vh)();if((0,i.useEffect)((()=>{t&&e.length>0&&s.send((0,sa.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,na.Fh)(a).toLowerCase()}`,surface:(0,na.Fh)(a),uri:t}))}),[s,e,t,a]),0===e.length)return null;const n=(0,o.o_h)(t)?.id,r=1===e.length?e[0].clickthroughUrl:(0,ra.q)(n),c=oa.Qd,d=e.length>c,u=e.length-(c-1),m=e.slice(0,d?c-1:c);return(0,W.jsx)(la.N,{to:r,pathname:e.length>1?r:void 0,state:{uri:t},className:ua,onClick:()=>s.send((0,sa.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,na.Fh)(a),uri:t})),"data-testid":"show-leavebehinds-container",children:(0,W.jsx)(pt.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,W.jsxs)("div",{className:da,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,W.jsx)(aa.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:ma,imageWidth:ma},e.adId))),d?(0,W.jsx)(ga,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:ma,borderRadius:"4px",padding:"6px",children:(0,W.jsx)(p.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,W.jsx)(ha,{leavebehinds:e})})})};var ga=(0,ta.Ay)(ia.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),xa=a(40347);const ya=na.ui.SHOW_PAGE;function va({uri:e}){const{data:t,error:a,getLeavebehinds:s}=(0,xa.A)({surface:ya,uri:e});(0,i.useEffect)((()=>{s()}),[s]);const n=(0,i.useMemo)((()=>t?(0,oa.iT)(t,e):[]),[t?.requestId]);return a||t?.leavebehindAds&&t?.leavebehindAds?.length<1?null:(0,W.jsx)(pa,{leavebehinds:n,uri:e,surface:ya})}var ba=a(92734),ja=a(65168),fa=a(14591),Ca=a(89334),wa=a(84736),ka=a(38167),Sa=a(76332),Pa=a(43497),Ra=a(48512),Ia=a(2169),Ea=a(18672);const Na=({className:e,title:t,uri:a})=>{const{data:i}=(0,Sa.v)({uri:a}),s=i?.seoRecommendedPodcast.totalCount,n=i?.seoRecommendedPodcast.items,r=function(e){return(e||[]).filter((e=>(0,Ra.K)(e.data)))}(n);if(0===s)return null;const c=(0,o.o_h)(a)?.id;return(0,W.jsx)(Ia.$,{className:e,title:t,seeAllLabel:l.Ru.get("shelf.see-all"),total:s,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${c}:more-like-this`,children:r?.map((({data:e},t)=>(0,W.jsx)(wa.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,Ea.w)(e.mediaType),index:t},e.uri)))})},Aa=e=>{const t=(0,Pa.D)({entityType:T.c.SHOW,componentType:"shelf",uri:e.uri});return(0,W.jsx)(ka.s,{onError:t,children:(0,W.jsx)(Na,{...e})})};var Ta=a(87415),Ba=a(58639),Ma=a(45143),_a=a(14259),La=a(60864),Da=a(15218);const Fa=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Ua=i.memo((function({uri:e,children:t}){return(0,W.jsx)(Da.E,{uri:e,defaultState:[],sortContext:Fa,localStorageKey:"showFilterParams-v2",children:t})}));var Oa=a(63148);const za={field:Oa.WY.PUBLISH_DATE,order:Oa.AX.DESC},Ha={field:Oa.WY.PUBLISH_DATE,order:Oa.AX.ASC},Va=Ha,qa={episodic:za,sequential:Ha,recent:za};function Wa(){return new Map([[za,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[Ha,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function Ga(e){return qa[e]}const Ka=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Ga("recent")}),Ya=e=>{const t=Wa();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},$a=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,W.jsx)(Da.E,{uri:e,defaultState:a,sortContext:Ka,localStorageKey:"showSortParam",validator:Ya,children:t})}));var Xa=a(95059),Za=a(24395),Qa=a(16026),Ja=a(88308);const ei="ysJC093hc_2ixGCy40_s",ti="mJP3Bamg3hN7S0p7XKfN",ai="clPqCj1L_KSfoVuTuP6x",ii="vqQmhCMZq7eUtTV7YYOQ",si=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(Ka),{sortState:s}=(0,i.useContext)(Fa),n=function(e,t,a){const i=(0,Tt.T)(),{canSort:s}=i.capabilities,n=(0,Ja.U0)((async(s,n)=>i.getContents(e,{offset:s,limit:n,sort:t,filters:a})),[i,e,t,a]),r=(0,Ja.U0)((async(t,a)=>i.getContents(e,{offset:t,limit:a})),[i,e]);return s?n:r}(e.uri,a,s),r=(0,Xa.c)(),o=r?6:50,[c,d]=(0,i.useState)(o),u=(0,i.useCallback)((async(e,t)=>{const a=await n(e,t);return{items:a.items,totalLength:a.totalCount}}),[n]),{getItems:m,nrValidItems:h}=(0,Qa.E)({fetch:u,nrItems:o,limit:50}),g=(0,i.useCallback)((()=>{d((e=>e+o))}),[o]),x=r&&h>c,y=(0,La.x)(e.uri);return(0,W.jsxs)(Za.pZ,{value:"track-list",children:[(0,W.jsx)(At._,{onReachBottom:r?void 0:g,children:m(0,c-1).map(((a,i)=>a&&(0,W.jsxs)("div",{className:ti,children:[(0,W.jsx)("hr",{className:ei,"aria-hidden":!0}),(0,W.jsx)(Ba.q,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))}),x&&(0,W.jsx)("div",{className:ai,children:(0,W.jsxs)(Ma.v,{onClick:()=>{g(),y({category:La.J.LoadMore})},className:ii,children:[(0,W.jsx)(p.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,W.jsx)(_a.V,{size:"xsmall"})]})})]})}));var ni=a(28525);const ri={field:Oa.K$.ISPLAYED,operator:Oa.uj.EQUALS,value:!1},oi={field:Oa.K$.STARTEDPLAYING,operator:Oa.uj.GREATER_THAN,value:0};const li="all-episodes",ci=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(Fa),s=new Map([[ri,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[oi,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),n=Array.from(s.values());n.unshift({key:li,value:l.Ru.get("mwp.podcast.all.episodes")});const r=Array.from(s.keys()),o=(0,i.useCallback)((t=>{if(t===li)a([]);else{const e=r.find((e=>s.get(e)?.key===t));e&&a([e])}e()}),[e,a,r,s]);if(!s.size||!r)return null;let c=n[0];const d=Array.from(s.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,W.jsx)(ni.g,{options:n,onSelect:e=>o(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},di=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(Ka),s=Wa(),n=Array.from(s.values()),r=Array.from(s.keys()),o=(0,i.useCallback)((t=>{const i=r.find((e=>s.get(e)?.key===t));i&&a(i),e()}),[r,e,s,a]);if(!s.size||!t)return null;const c=Array.from(s.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=s.get(c);return d?(0,W.jsx)(ni.g,{options:n,onSelect:e=>o(e),selected:d,heading:l.Ru.get("drop_down.sort_by")}):null},ui="bOAvdKi0zqyA_S6ThcvF",mi="jVWq1orbpiIK34UFHkFb",hi="gYTsg8kvcGmu41_lilIb",pi="GMHh7OED_Nijo4zzSfrb",gi="sNEwCEh44Lapg36PnVFw",xi="SoIsw3P_1RnUtFBHs_2d",yi="OMG3QMzpwer8oWsiJpzs",vi="r0yVSge7A1iSTNfudfyV",bi="yP6EeRtQJeqKq10IsMxn",ji="MIaGJ1KyQ3JLblOjWL19",fi="p8WHC1qBUrwrBwzp_vYY",Ci="Uzyuaxpkm_Gwb6jOGbva",wi="TSNj_F4gGzCuxrzx6n98",ki="E4HX0M3aD0MY5dUCKSCb",Si="CbSqM7wDwoLFnyIo1iKL",Pi="c0h80mSMc3PkNlHX0DYs",Ri="SGGetEMTKgQk1aJvG4k9",Ii="ne3ntrWAoMrE6_4A23Mf",Ei=({spec:e})=>{const t=(0,$.s)(),{canSort:a,canFilter:s}=(0,Tt.T)().capabilities,n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),r=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,W.jsxs)("div",{className:bi,children:[s&&(0,W.jsx)("div",{className:fi,children:(0,W.jsx)(ci,{onFilter:n})}),!s&&(0,W.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Ci,children:l.Ru.get("mwp.podcast.all.episodes")}),a&&(0,W.jsx)("div",{className:ji,children:(0,W.jsx)(di,{onSort:r})})]})};var Ni=a(33025),Ai=a(72755),Ti=a(98370),Bi=a(39182),Mi=a(42262);const _i=e=>{switch(e){case Bt.t5.TRAILER:return l.Ru.get("podcasts.next-episode.trailer");case Bt.t5.UP_NEXT:return l.Ru.get("podcasts.next-episode.up-next");case Bt.t5.CONTINUE_LISTENING:return l.Ru.get("podcasts.next-episode.continue-listening");case Bt.t5.FIRST_PUBLISHED:return l.Ru.get("podcasts.next-episode.first-published");case Bt.t5.LATEST_PUBLISHED:return l.Ru.get("podcasts.next-episode.latest-published");default:return}},Li=({breakpoint:e,metadata:t,spec:a})=>{const{uri:s,trailer:r,topics:o,description:c,htmlDescription:d,rating:u}=t,x=(0,Ni.N)(s),y=(0,$.s)(),{spec:b,logger:f}=(0,ze.r)(n.R,{data:{uri:s}}),w=(0,i.useMemo)((()=>b.aboutSectionFactory()),[b]),k=(0,i.useMemo)((()=>a.episodeListFactory()),[a]),S=(0,h.wA)(),P=(0,g.NC)(Dt.Pfj,{loadingValue:!1}),R=(0,Ae.V)(),{sortState:I}=(0,i.useContext)(Fa),E=(0,Tt.T)(),N=(0,Xa.c)(),{usePlayContextItem:A}=(0,Gt.P)({uri:s,metadata:{[Bi.W.SORTING_CRITERIA]:E.getPlayerSort(Va),[Bi.W.FILTERING_PREDICATE]:E.getPlayerFilter(I)}},{featureIdentifier:"show"}),{isActive:T,isPlaying:B,togglePlay:M}=A({uri:r?.uri||""}),_=(0,i.useCallback)((e=>{const t=a.aboutSectionFactory().seeMoreButtonFactory(),i=e?t.hitUiReveal():t.hitUiHide();y.logInteraction(i)}),[y,a]),L=(0,i.useCallback)(((e,t)=>{const i=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});y.logInteraction(i)}),[y,a]),D=r?{name:r.name,uri:r.uri,audio:{items:r.audio.items.map((e=>({url:e.url})))}}:null,F=(0,Ba.B)(t),U=(0,Ai.C)(D,F),O=(0,i.useCallback)((()=>{r?.uri&&(R?U():M())}),[U,R,M,r?.uri]),{ref:z,breakpoint:H}=(0,Ti.x)({[ot.E.MEDIUM]:0,[ot.E.LARGE]:600}),V=o.length>0,q=c||d,X=q||V,Z=t.nextBestEpisode?.type===Bt.t5.LATEST_PUBLISHED&&P,Q=(0,ja.z)(),J=(0,ja.$)(),ee=`${s}|[]`,te=(0,fa.A)(ee),ae=!Q&&!J;return(0,i.useEffect)((()=>{ae&&te()}),[ee,te,ae]),(0,W.jsxs)("div",{className:m()(mi,"contentSpacing",{[pi]:e===ot.E.LARGE}),ref:z,children:[(0,W.jsx)(Ta.q,{className:hi,gatedEntityCoverArt:t.gatedEntityCoverArt,gatedEntityRelations:t.gatedEntityRelations,upsellExplanation:t.upsellExplanation,hasAccess:t.hasGatedEntityRelationAccess,showCoverArt:!0}),(0,W.jsxs)("div",{className:gi,children:[X&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Ci,children:l.Ru.get("artist.about")}),q&&(0,W.jsx)(Y.N,{maxLines:4,content:(c||"").trim(),onExpanded:_,htmlContent:d||void 0}),r&&(0,W.jsx)(We.h,{menu:(0,W.jsx)(ba.b,{uri:r.uri,showUri:s,sharingInfo:r.sharingInfo}),children:(0,W.jsx)(K,{label:l.Ru.get("track-trailer"),className:wi,images:r.coverArt,title:r.name,duration:r.duration.milliseconds,moreButton:(0,W.jsx)(j.b,{menu:(0,W.jsx)(ba.b,{uri:r.uri,sharingInfo:r.sharingInfo,showUri:s}),children:(0,W.jsx)(gt.e,{})}),onClick:O,isPlaying:B,isActive:T,size:G.LARGE,contentRating:r.contentRating?.label})}),(0,W.jsxs)("div",{className:Si,children:[u&&!x&&(0,W.jsx)("div",{className:Pi,children:(0,W.jsx)(qt,{rating:u,onClick:()=>{const e=w.ratingButtonFactory().hitUiReveal();f.logInteraction(e),S((0,v.eH)(s,t))}})}),V&&(0,W.jsx)(C.N,{topics:o,className:Ri,onClick:L})]})]}),(0,W.jsx)(va,{uri:s})]}),(0,W.jsx)(lt.o.Provider,{value:H,children:(0,W.jsxs)("div",{className:m()(yi,{[vi]:N}),"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&!Z&&(0,W.jsx)(Ba.q,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:A,status:_i(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,W.jsx)(Ei,{spec:a}),(0,W.jsx)(Mi.r,{spec:k,children:(0,W.jsx)(si,{showMetadata:t,usePlayContextItem:A})})]})}),(0,W.jsx)(Ft.Z,{copyrights:[]}),(0,W.jsxs)("div",{className:xi,children:[Q&&(0,W.jsx)(Ca.w,{uri:s,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-above"}),N&&(0,W.jsx)(Aa,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:s,className:Ii}),J&&(0,W.jsx)(Ca.w,{uri:s,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-below"})]})]})},Di=i.memo(Li);var Fi=a(12115),Ui=a(42001);const Oi=({reason:e})=>{const t=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t?(0,W.jsx)(p.E,{variant:"bodySmall",semanticColor:"textBase",className:ki,children:t}):null};const zi=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:s,podcastType:n,publisherName:r,gatedContentAccessReason:o}=e,c=(0,W.jsx)(Qt.H,{uri:a});return(0,W.jsxs)(Ye.z,{backgroundColor:t,children:[(0,W.jsx)(Ze.h,{children:(0,W.jsx)(We.h,{menu:c,children:(0,W.jsx)(Qe.X,{text:s,dragUri:a,dragLabel:s})})}),(0,W.jsx)(Fi.X,{children:(0,W.jsx)(We.h,{menu:c,children:(0,W.jsx)(Ui.b,{loading:"eager",name:s,images:i,placeholderType:"show",shape:Ui.u.SQUARE})})}),(0,W.jsxs)(Xe.Y,{children:[(0,W.jsxs)(et.B,{children:["SHOW"===n?l.Ru.get("type.show"):l.Ru.get("type.podcast"),o&&(0,W.jsx)(Oi,{reason:o})]}),(0,W.jsx)(We.h,{menu:c,children:(0,W.jsx)(at.mm,{dragUri:a,dragLabel:s,scaleAtMinWidth:at.tw,children:(0,W.jsx)("span",{"data-testid":"show-title",children:s})})}),(0,W.jsx)(tt.g,{children:r})]})]})};var Hi=a(67722),Vi=a(73638),qi=a(47176),Wi=a(82518);const Gi=({metadata:e,showId:t})=>{const{coverArt:a,name:s,uri:r,isSaved:o}=e,{spec:l}=(0,ze.r)(n.R,{data:{uri:r}}),d=(0,i.useMemo)((()=>l.actionBarFactory()),[l]),u=(0,Lt.H)(a[0]?.url||null),m=(0,lt.y)();return(0,W.jsxs)("section",{className:ui,children:[(0,W.jsx)(c.Q,{children:(0,Yt.hV)({showOrAudiobookName:s,type:"Podcast"})}),(0,W.jsx)(_t.c,{artistOrShow:s,uri:r,entityType:_t.p.PODCAST}),(0,W.jsx)(zi,{metadata:e,backgroundColor:u}),(0,W.jsx)(ea,{uri:r,name:s,isSaved:o,backgroundColor:u,spec:d}),(0,W.jsx)(Di,{breakpoint:m,metadata:e,showId:t,spec:l})]})},Ki=(0,i.memo)((function(){const{showId:e=""}=(0,s.g)(),t=`spotify:show:${e}`,{data:a,error:n,redirectUri:c}=(0,Se.W)(t),{data:u,isLoading:m}=(0,qi.r)(t);if(c){const e=(0,o.Lce)(c);return(0,W.jsx)(Zt.$,{to:e.toURLPath(!0)})}const h=a&&(0,Bt.Go)(a);return!a||m||n?n instanceof Wi.W?(0,W.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,W.jsx)(d.LoadingPage,{hasError:!!n,errorMessage:l.Ru.get("error.not_found.title.page")}):h?(0,W.jsx)(i.Suspense,{fallback:null,children:(0,W.jsx)(Hi.u,{pageId:r.$h.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,W.jsx)(Vi.d,{dynamicColors:u,children:(0,W.jsx)(Xt,{metadata:a},`${!!a.consumptionCapExplanation}`)})})}):(0,W.jsx)(i.Suspense,{fallback:null,children:(0,W.jsx)(Hi.u,{pageId:r.$h.PODCAST,uri:t,children:(0,W.jsx)(Ua,{uri:a.uri,children:(0,W.jsx)($a,{uri:a.uri,defaultSortParam:Ga(a.consumptionOrder),children:(0,W.jsx)(Vi.d,{dynamicColors:u,children:(0,W.jsx)(Gi,{showId:e,metadata:a})})})})})})}))},44183:(e,t,a)=>{a.d(t,{a:()=>r});var i=a(81493),s=a(74598),n=a(72288);const r=()=>{const[e,t]=(0,n.x)("view-mode",s.I.LIST);let a=e;return i.p.includes(a)||(a=s.I.LIST),{viewMode:a,isCompactMode:a===s.I.COMPACT,setViewMode:t}}},86422:(e,t,a)=>{a.d(t,{a:()=>i.a});var i=a(44183)},74598:(e,t,a)=>{a.d(t,{I:()=>i});let i=function(e){return e.LIST="list",e.COMPACT="compact",e}({})},48455:(e,t,a)=>{a.d(t,{$:()=>s});var i=a(30758);const s=(e,t)=>{const a=(0,i.useRef)(e);(0,i.useEffect)((()=>{a.current=e}),[e]),(0,i.useEffect)((()=>{let e;function i(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){a.current(i)}),t),i}),[t])}},44662:(e,t,a)=>{a.d(t,{t:()=>n});var i=a(18308),s=a(52593);function n(){return(0,i.N)(s.Z)}},89979:(e,t,a)=>{a.d(t,{b:()=>n});var i=a(88176),s=a(45176);const n=({downloadAvailability:e,isExplicit:t,isMOGEFRestricted:a,contentRating:n,isPaywalled:r,isEnhanced:o,hasAssociatedVideo:l})=>{let c=0;const d={download:!1,explicit:!1,nineteen:!1,paid:!1,enhanced:!1,hasAssociatedVideo:!1};return e===s.kw.YES&&(d.download=!0,c++),(t&&!a||n===i.x7.Explicit)&&(d.explicit=!0,c++),(a||n===i.x7.NineteenPlus)&&(d.nineteen=!0,c++),r&&(d.paid=!0,c++),o&&(d.enhanced=!0,c++),l&&(d.hasAssociatedVideo=!0,c++),{badges:d,hasBadges:c>0}}}}]);
//# sourceMappingURL=xpui-routes-show.js.map